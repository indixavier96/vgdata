define("discourse/plugins/discourse-rss-polling/admin/models/rss-polling-feed-settings",["exports","discourse/lib/ajax"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={show:()=>(0,t.ajax)("/admin/plugins/rss_polling/feed_settings.json"),updateFeed:e=>(0,t.ajax)("/admin/plugins/rss_polling/feed_settings",{type:"PUT",contentType:"application/json",processData:!1,data:JSON.stringify({feed_setting:e})}),deleteFeed:e=>(0,t.ajax)("/admin/plugins/rss_polling/feed_settings",{type:"DELETE",contentType:"application/json",processData:!1,data:JSON.stringify({feed_setting:e})})}}),define("discourse/plugins/discourse-rss-polling/discourse/controllers/admin-plugins/rss-polling",["exports","@glimmer/tracking","@ember/controller","@ember/object","@ember/service","@ember/utils","discourse/lib/ajax-error","discourse/lib/array-tools","discourse/lib/decorators","discourse-i18n","discourse/plugins/discourse-rss-polling/admin/models/rss-polling-feed-settings"],function(e,t,s,i,n,l,d,o,a,r,u){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class c extends s.default{static{dt7948.g(this.prototype,"dialog",[n.service])}#e=void dt7948.i(this,"dialog")
static{dt7948.g(this.prototype,"saving",[t.tracked],function(){return!1})}#t=void dt7948.i(this,"saving")
static{dt7948.g(this.prototype,"valid",[t.tracked],function(){return!1})}#s=void dt7948.i(this,"valid")
static{dt7948.g(this.prototype,"disabled",[t.tracked],function(){return!0})}#i=void dt7948.i(this,"disabled")
get feedSettings(){return this.model}get unsavable(){return!this.valid||this.saving}validate(){let e=!0
this.feedSettings.forEach(t=>{const s=!(0,l.isBlank)(t.feed_url)&&!(0,l.isBlank)(t.author_username);(0,i.set)(t,"valid",s),e=e&&s}),this.valid!==e&&(this.valid=e)}static{dt7948.n(this.prototype,"validate",[a.bind])}create(){(0,o.addUniqueValueToArray)(this.feedSettings,{feed_url:null,author_username:null,discourse_category_id:null,discourse_tags:null,feed_category_filter:null,disabled:!1,editing:!0}),this.validate()}static{dt7948.n(this.prototype,"create",[i.action])}destroyFeedSetting(e){this.dialog.deleteConfirm({message:(0,r.i18n)("admin.rss_polling.destroy_feed.confirm"),didConfirm:async()=>{try{await u.default.deleteFeed(e),(0,o.removeValueFromArray)(this.feedSettings,e)}catch(t){(0,d.popupAjaxError)(t)}finally{this.saving=!1}}}),this.validate()}static{dt7948.n(this.prototype,"destroyFeedSetting",[i.action])}editFeedSetting(e){(0,i.set)(e,"disabled",!1),(0,i.set)(e,"editing",!0),this.validate()}static{dt7948.n(this.prototype,"editFeedSetting",[i.action])}cancelEdit(e){e.id||(0,o.removeValueFromArray)(this.feedSettings,e),(0,i.set)(e,"disabled",!0),(0,i.set)(e,"editing",!1),this.validate()}static{dt7948.n(this.prototype,"cancelEdit",[i.action])}async updateFeedSetting(e){this.saving=!0
try{await u.default.updateFeed(e)}catch(t){(0,d.popupAjaxError)(t)}finally{this.saving=!1,(0,i.set)(e,"disabled",!0),(0,i.set)(e,"editing",!1)}this.validate()}static{dt7948.n(this.prototype,"updateFeedSetting",[i.action])}updateAuthorUsername(e,t){(0,i.set)(e,"author_username",t[0]),this.validate()}static{dt7948.n(this.prototype,"updateAuthorUsername",[i.action])}updateSettingProperty(e,t,s){(0,i.set)(e,t,s.target.value),this.validate()}static{dt7948.n(this.prototype,"updateSettingProperty",[i.action])}}e.default=c}),define("discourse/plugins/discourse-rss-polling/discourse/initializers/rss-polling-admin-plugin-configuration-nav",["exports","discourse/lib/plugin-api"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={name:"rss-polling-admin-plugin-configuration-nav",initialize(e){const s=e.lookup("service:current-user")
s?.admin&&(0,t.withPluginApi)(e=>{e.setAdminPluginIcon("discourse-rss-polling","rss")})}}}),define("discourse/plugins/discourse-rss-polling/discourse/routes/admin-plugins/rss-polling",["exports","@ember-compat/tracked-built-ins","discourse/routes/discourse","discourse/plugins/discourse-rss-polling/admin/models/rss-polling-feed-settings"],function(e,t,s,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class n extends s.default{async model(){const e=await i.default.show()
return new t.TrackedArray(e.feed_settings)}setupController(e,t){t.forEach(e=>{e.disabled=!0,e.editing=!1}),e.setProperties({model:t})}}e.default=n}),define("discourse/plugins/discourse-rss-polling/discourse/rss-polling-route-map",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={resource:"admin.adminPlugins",path:"/plugins",map(){this.route("rss_polling")}}}),define("discourse/plugins/discourse-rss-polling/discourse/templates/admin-plugins/rss-polling",["exports","@ember/helper","@ember/modifier","discourse/components/d-button","discourse/select-kit/components/category-chooser","discourse/select-kit/components/email-group-user-chooser","discourse/select-kit/components/tag-chooser","discourse-i18n","@ember/component","@ember/template-factory","@ember/component/template-only"],function(e,t,s,i,n,l,d,o,a,r,u){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(0,a.setComponentTemplate)((0,r.createTemplateFactory)({id:"8M48YXCM",block:'[[[10,0],[14,0,"rss-polling-feed-settings"],[12],[1,"\\n  "],[10,"table"],[12],[1,"\\n    "],[10,"thead"],[12],[1,"\\n      "],[10,"tr"],[12],[1,"\\n        "],[10,"th"],[14,"colspan","2"],[12],[1,[28,[32,0],["admin.rss_polling.feed"],null]],[13],[1,"\\n        "],[10,"th"],[14,"colspan","3"],[12],[1,[28,[32,0],["admin.rss_polling.discourse"],null]],[13],[1,"\\n        "],[10,"th"],[14,"rowspan","2"],[14,"colspan","2"],[12],[1,"\\n          "],[8,[32,1],[[24,0,"btn-primary wide-button add-rss-polling-feed"]],[["@action","@icon","@disabled"],[[30,1,["create"]],"plus",[30,1,["saving"]]]],null],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n      "],[10,"tr"],[12],[1,"\\n        "],[10,"th"],[12],[1,[28,[32,0],["admin.rss_polling.feed_url"],null]],[13],[1,"\\n        "],[10,"th"],[12],[1,[28,[32,0],["admin.rss_polling.feed_category_filter"],null]],[13],[1,"\\n        "],[10,"th"],[12],[1,[28,[32,0],["admin.rss_polling.author"],null]],[13],[1,"\\n        "],[10,"th"],[12],[1,[28,[32,0],["admin.rss_polling.discourse_category"],null]],[13],[1,"\\n        "],[10,"th"],[12],[1,[28,[32,0],["admin.rss_polling.discourse_tags"],null]],[13],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n\\n    "],[10,"tbody"],[12],[1,"\\n"],[42,[28,[31,1],[[28,[31,1],[[30,1,["model"]]],null]],null],null,[[[1,"        "],[10,"tr"],[12],[1,"\\n          "],[10,"td"],[12],[1,"\\n            "],[11,"input"],[24,0,"rss-polling-feed-url"],[16,"disabled",[30,2,["disabled"]]],[24,"placeholder","https://blog.example.com/feed"],[16,2,[30,2,["feed_url"]]],[24,4,"text"],[4,[32,2],["input",[28,[32,3],[[30,1,["updateSettingProperty"]],[30,2],"feed_url"],null]],null],[12],[13],[1,"\\n          "],[13],[1,"\\n          "],[10,"td"],[12],[1,"\\n            "],[11,"input"],[24,0,"rss-polling-feed-updates"],[16,"disabled",[30,2,["disabled"]]],[24,"placeholder","updates"],[16,2,[30,2,["feed_category_filter"]]],[24,4,"text"],[4,[32,2],["input",[28,[32,3],[[30,1,["updateSettingProperty"]],[30,2],"feed_category_filter"],null]],null],[12],[13],[1,"\\n          "],[13],[1,"\\n          "],[10,"td"],[12],[1,"\\n            "],[8,[32,4],[[24,0,"rss-polling-feed-user"]],[["@value","@onChange","@options"],[[30,2,["author_username"]],[28,[32,3],[[30,1,["updateAuthorUsername"]],[30,2]],null],[28,[32,5],null,[["disabled","maximum"],[[30,2,["disabled"]],1]]]]],null],[1,"\\n          "],[13],[1,"\\n          "],[10,"td"],[12],[1,"\\n            "],[8,[32,6],[[24,0,"small rss-polling-feed-category"]],[["@value","@onChange","@options"],[[30,2,["discourse_category_id"]],[28,[32,3],[[28,[31,2],[[30,2,["discourse_category_id"]]],null]],null],[28,[32,5],null,[["disabled"],[[30,2,["disabled"]]]]]]],null],[1,"\\n          "],[13],[1,"\\n          "],[10,"td"],[12],[1,"\\n            "],[8,[32,7],[[24,0,"small rss-polling-feed-tag"]],[["@tags","@allowCreate","@everyTag","@unlimitedTagCount","@onChange","@options"],[[30,2,["discourse_tags"]],false,true,true,[28,[32,3],[[28,[31,2],[[30,2,["discourse_tags"]]],null]],null],[28,[32,5],null,[["disabled"],[[30,2,["disabled"]]]]]]],null],[1,"\\n          "],[13],[1,"\\n          "],[10,"td"],[12],[1,"\\n"],[41,[30,2,["editing"]],[[[1,"              "],[8,[32,1],[[24,0,"btn-primary save-rss-polling-feed"]],[["@icon","@action","@disabled"],["floppy-disk",[28,[32,3],[[30,1,["updateFeedSetting"]],[30,2]],null],[30,1,["unsavable"]]]],null],[1,"\\n              "],[8,[32,1],null,[["@icon","@action","@disabled"],["xmark",[28,[32,3],[[30,1,["cancelEdit"]],[30,2]],null],[30,1,["saving"]]]],null],[1,"\\n"]],[]],[[[1,"              "],[8,[32,1],null,[["@icon","@action","@disabled"],["pencil",[28,[32,3],[[30,1,["editFeedSetting"]],[30,2]],null],[30,1,["saving"]]]],null],[1,"\\n              "],[8,[32,1],null,[["@icon","@action","@disabled"],["trash-can",[28,[32,3],[[30,1,["destroyFeedSetting"]],[30,2]],null],[30,1,["saving"]]]],null],[1,"\\n"]],[]]],[1,"          "],[13],[1,"\\n        "],[13],[1,"\\n"]],[2]],null],[1,"    "],[13],[1,"\\n\\n    "],[10,"tfoot"],[12],[1,"\\n      "],[10,"tr"],[12],[1,"\\n        "],[10,"td"],[12],[13],[1,"\\n        "],[10,"td"],[12],[13],[1,"\\n        "],[10,"td"],[12],[13],[1,"\\n        "],[10,"td"],[12],[13],[1,"\\n        "],[10,"td"],[12],[13],[1,"\\n        "],[10,"td"],[12],[13],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n\\n  "],[10,2],[12],[1,"\\n    "],[10,3],[14,6,"https://meta.discourse.org/t/configure-the-discourse-rss-polling-plugin/156387"],[12],[1,"\\n      "],[1,[28,[32,0],["admin.rss_polling.documentation"],null]],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n"],[13]],["@controller","setting"],["each","-track-array","mut","if"]]',moduleName:"/var/www/discourse/frontend/discourse/discourse/plugins/discourse-rss-polling/discourse/templates/admin-plugins/rss-polling.js",scope:()=>[o.i18n,i.default,s.on,t.fn,l.default,t.hash,n.default,d.default],isStrictMode:!0}),(0,u.default)(void 0,"rss-polling"))})

//# sourceMappingURL=discourse-rss-polling-c275103d.map