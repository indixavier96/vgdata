(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7341,4496,7806],{6082:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,a)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};Object.defineProperty(t,"__esModule",{value:!0}),t.FacebookLoginClient=t.SDK_SCRIPT_ELE_ID=void 0;let s=n(63154);t.SDK_SCRIPT_ELE_ID="facebook-jssdk",t.FacebookLoginClient={getFB:()=>window.FB?window.FB:(console.warn("FB not found"),null),getLoginStatus(e,t=!1){let n=this.getFB();if(!n){e({status:"unknown"});return}n.getLoginStatus(e,t)},getProfile(e,t){var n;null===(n=this.getFB())||void 0===n||n.api("me",t,e)},init(e){var t;null===(t=this.getFB())||void 0===t||t.init(e)},clear(){window.FB=null;let e=document.getElementById(t.SDK_SCRIPT_ELE_ID);e&&e.remove()},isRedirected(e){var t;let n=(0,s.paramsToObject)(window.location.search);return n.state===(null==e?void 0:e.state)&&void 0!==n[null!==(t=null==e?void 0:e.response_type)&&void 0!==t?t:""]},loadSdk(e,n){return r(this,void 0,void 0,function*(){yield(0,s.createScriptEle)(t.SDK_SCRIPT_ELE_ID,`https://connect.facebook.net/${e}/sdk${n?"/xfbml.customerchat":""}.js`)})},redirectToDialog(e,t){var{ignoreSdkError:n}=t,r=i(t,["ignoreSdkError"]);window.location.href=`https://www.facebook.com/dialog/oauth${(0,s.objectToParams)(Object.assign(Object.assign({},e),r))}`},login(e,t){var n,{ignoreSdkError:r}=t,s=i(t,["ignoreSdkError"]);try{null===(n=this.getFB())||void 0===n||n.login(e,s)}catch(e){if(r)return;throw e}},logout(e){this.getLoginStatus(t=>{var n;"connected"===t.status?null===(n=this.getFB())||void 0===n||n.logout(e):e()})}}},37486:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});let a=s(n(21956)),u=n(6082),c=n(63154);t.default=function(e){var t,n;let{appId:r,language:i="en_US",scope:s="public_profile, email",fields:l="name,email,picture",onSuccess:h,onFail:d,onProfileSuccess:f,className:p,style:_,children:m="Login with Facebook",render:b,autoLoad:g=!1,useRedirect:v=!1,useCustomerChat:y=!1}=e,w=Object.assign(Object.assign({version:"v9.0",xfbml:!1,cookie:!1,localStorage:!0},e.initParams),{appId:r}),S=Object.assign(Object.assign({redirect_uri:"undefined"!=typeof window?location.origin+location.pathname:"/",state:"facebookdirect",response_type:"code"},e.dialogParams),{client_id:r}),C=Object.assign(Object.assign({return_scopes:!1,ignoreSdkError:!1},e.loginOptions),{auth_nonce:"function"==typeof(null===(t=e.loginOptions)||void 0===t?void 0:t.auth_nonce)?e.loginOptions.auth_nonce():null===(n=e.loginOptions)||void 0===n?void 0:n.auth_nonce,scope:s});(0,a.useEffect)(()=>{O()},[]);let O=()=>o(this,void 0,void 0,function*(){yield u.FacebookLoginClient.loadSdk(i,y),window.fbAsyncInit=()=>{u.FacebookLoginClient.init(w);let e=u.FacebookLoginClient.isRedirected(S);if(!1===e&&g){E();return}!0===e&&v&&T()}}),T=()=>{u.FacebookLoginClient.login(e=>{if(!e.authResponse){d&&d({status:"loginCancelled"});return}h&&h(e.authResponse),f&&u.FacebookLoginClient.getProfile(f,{fields:l})},Object.assign(Object.assign({},C),{scope:s}))},E=()=>{if((0,c.isFacebookApp)()||v){u.FacebookLoginClient.redirectToDialog(S,C);return}if(!window.FB){d&&d({status:"facebookNotLoaded"});return}T()};return b?b({onClick:E,logout:u.FacebookLoginClient.logout}):a.default.createElement("button",{type:"button",onClick:E,className:p,style:_},m)}},44154:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createScriptEle=void 0,t.createScriptEle=(e,t)=>new Promise(n=>{var r;let i=document.getElementsByTagName("script")[0];if(document.getElementById(e)){n(void 0);return}let s=document.createElement("script");if(s.id=e,s.src=t,s.onload=n,i)null===(r=i.parentNode)||void 0===r||r.insertBefore(s,i);else{let e=document.body.childNodes;document.body.insertBefore(s,e.item(e.length-1))}})},63154:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(44154),t),i(n(22148),t),i(n(26131),t)},22148:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.paramsToObject=t.objectToParams=t.isObject=void 0,t.isObject=e=>"[object Object]"===Object.prototype.toString.call(e),t.objectToParams=e=>(0,t.isObject)(e)&&0!==Object.keys(e).length?"?"+Object.keys(e).map(t=>`${t}=${encodeURIComponent(e[t])}`).join("&"):"",t.paramsToObject=e=>(null==e?void 0:e.replace(/^\?/,"").split("&").reduce((e,t)=>{if(!t)return e;let[n,r]=t.split("=");return Object.assign(Object.assign({},e),{[n]:decodeURIComponent(r)})},{}))||{}},26131:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFacebookApp=void 0,t.isFacebookApp=()=>{if("undefined"==typeof window)return!1;let e=navigator.userAgent||navigator.vendor||window.opera;return e.indexOf("FBAN")>-1||e.indexOf("FBAV")>-1||e.indexOf("Instagram")>-1}},69026:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let o=s(n(37486));i(n(63154),t),i(n(55420),t),i(n(37486),t),i(n(6082),t),t.default=o.default},99280:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},55420:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(99280),t),i(n(64803),t),i(n(85008),t)},64803:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},85008:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.LoginStatus=void 0,(n=t.LoginStatus||(t.LoginStatus={})).Connected="connected",n.NotAuthorized="not_authorized",n.Unknown="unknown"},13146:function(e){var t;t=function(){"use strict";var e,t,n=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,r=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,i={years:31536e6,months:2628e6,days:864e5,hours:36e5,minutes:6e4,seconds:1e3,milliseconds:1,weeks:6048e5},s=function(e){return e instanceof h},o=function(e,t,n){return new h(e,n,t.$l)},a=function(e){return t.p(e)+"s"},u=function(e){return e<0},c=function(e){return u(e)?Math.ceil(e):Math.floor(e)},l=function(e,t){return e?u(e)?{negative:!0,format:""+Math.abs(e)+t}:{negative:!1,format:""+e+t}:{negative:!1,format:""}},h=function(){function u(e,t,n){var s=this;if(this.$d={},this.$l=n,void 0===e&&(this.$ms=0,this.parseFromMilliseconds()),t)return o(e*i[a(t)],this);if("number"==typeof e)return this.$ms=e,this.parseFromMilliseconds(),this;if("object"==typeof e)return Object.keys(e).forEach(function(t){s.$d[a(t)]=e[t]}),this.calMilliseconds(),this;if("string"==typeof e){var u=e.match(r);if(u){var c=u.slice(2).map(function(e){return null!=e?Number(e):0});return this.$d.years=c[0],this.$d.months=c[1],this.$d.weeks=c[2],this.$d.days=c[3],this.$d.hours=c[4],this.$d.minutes=c[5],this.$d.seconds=c[6],this.calMilliseconds(),this}}return this}var h=u.prototype;return h.calMilliseconds=function(){var e=this;this.$ms=Object.keys(this.$d).reduce(function(t,n){return t+(e.$d[n]||0)*i[n]},0)},h.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=c(e/31536e6),e%=31536e6,this.$d.months=c(e/2628e6),e%=2628e6,this.$d.days=c(e/864e5),e%=864e5,this.$d.hours=c(e/36e5),e%=36e5,this.$d.minutes=c(e/6e4),e%=6e4,this.$d.seconds=c(e/1e3),e%=1e3,this.$d.milliseconds=e},h.toISOString=function(){var e=l(this.$d.years,"Y"),t=l(this.$d.months,"M"),n=+this.$d.days||0;this.$d.weeks&&(n+=7*this.$d.weeks);var r=l(n,"D"),i=l(this.$d.hours,"H"),s=l(this.$d.minutes,"M"),o=this.$d.seconds||0;this.$d.milliseconds&&(o+=this.$d.milliseconds/1e3,o=Math.round(1e3*o)/1e3);var a=l(o,"S"),u=e.negative||t.negative||r.negative||i.negative||s.negative||a.negative,c=i.format||s.format||a.format?"T":"",h=(u?"-":"")+"P"+e.format+t.format+r.format+c+i.format+s.format+a.format;return"P"===h||"-P"===h?"P0D":h},h.toJSON=function(){return this.toISOString()},h.format=function(e){var r={Y:this.$d.years,YY:t.s(this.$d.years,2,"0"),YYYY:t.s(this.$d.years,4,"0"),M:this.$d.months,MM:t.s(this.$d.months,2,"0"),D:this.$d.days,DD:t.s(this.$d.days,2,"0"),H:this.$d.hours,HH:t.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:t.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:t.s(this.$d.seconds,2,"0"),SSS:t.s(this.$d.milliseconds,3,"0")};return(e||"YYYY-MM-DDTHH:mm:ss").replace(n,function(e,t){return t||String(r[e])})},h.as=function(e){return this.$ms/i[a(e)]},h.get=function(e){var t=this.$ms,n=a(e);return"milliseconds"===n?t%=1e3:t="weeks"===n?c(t/i[n]):this.$d[n],t||0},h.add=function(e,t,n){var r;return r=t?e*i[a(t)]:s(e)?e.$ms:o(e,this).$ms,o(this.$ms+r*(n?-1:1),this)},h.subtract=function(e,t){return this.add(e,t,!0)},h.locale=function(e){var t=this.clone();return t.$l=e,t},h.clone=function(){return o(this.$ms,this)},h.humanize=function(t){return e().add(this.$ms,"ms").locale(this.$l).fromNow(!t)},h.valueOf=function(){return this.asMilliseconds()},h.milliseconds=function(){return this.get("milliseconds")},h.asMilliseconds=function(){return this.as("milliseconds")},h.seconds=function(){return this.get("seconds")},h.asSeconds=function(){return this.as("seconds")},h.minutes=function(){return this.get("minutes")},h.asMinutes=function(){return this.as("minutes")},h.hours=function(){return this.get("hours")},h.asHours=function(){return this.as("hours")},h.days=function(){return this.get("days")},h.asDays=function(){return this.as("days")},h.weeks=function(){return this.get("weeks")},h.asWeeks=function(){return this.as("weeks")},h.months=function(){return this.get("months")},h.asMonths=function(){return this.as("months")},h.years=function(){return this.get("years")},h.asYears=function(){return this.as("years")},u}(),d=function(e,t,n){return e.add(t.years()*n,"y").add(t.months()*n,"M").add(t.days()*n,"d").add(t.hours()*n,"h").add(t.minutes()*n,"m").add(t.seconds()*n,"s").add(t.milliseconds()*n,"ms")};return function(n,r,i){e=i,t=i().$utils(),i.duration=function(e,t){return o(e,{$l:i.locale()},t)},i.isDuration=s;var a=r.prototype.add,u=r.prototype.subtract;r.prototype.add=function(e,t){return s(e)?d(this,e,1):a.bind(this)(e,t)},r.prototype.subtract=function(e,t){return s(e)?d(this,e,-1):u.bind(this)(e,t)}}},e.exports=t()},22687:function(e){var t;t=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,i,s){var o=i.prototype;s.utc=function(e){var t={date:e,utc:!0,args:arguments};return new i(t)},o.utc=function(t){var n=s(this.toDate(),{locale:this.$L,utc:!0});return t?n.add(this.utcOffset(),e):n},o.local=function(){return s(this.toDate(),{locale:this.$L,utc:!1})};var a=o.parse;o.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),a.call(this,e)};var u=o.init;o.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else u.call(this)};var c=o.utcOffset;o.utcOffset=function(r,i){var s=this.$utils().u;if(s(r))return this.$u?0:s(this.$offset)?c.call(this):this.$offset;if("string"==typeof r&&null===(r=function(e){void 0===e&&(e="");var r=e.match(t);if(!r)return null;var i=(""+r[0]).match(n)||["-",0,0],s=i[0],o=60*+i[1]+ +i[2];return 0===o?0:"+"===s?o:-o}(r)))return this;var o=16>=Math.abs(r)?60*r:r,a=this;if(i)return a.$offset=o,a.$u=0===r,a;if(0!==r){var u=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(a=this.local().add(o+u,e)).$offset=o,a.$x.$localOffset=u}else a=this.utc();return a};var l=o.format;o.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,t)},o.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var h=o.toDate;o.toDate=function(e){return"s"===e&&this.$offset?s(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var d=o.diff;o.diff=function(e,t,n){if(e&&this.$u===e.$u)return d.call(this,e,t,n);var r=this.local(),i=s(e).local();return d.call(r,i,t,n)}}},e.exports=t()},21404:function(e,t,n){"use strict";n.d(t,{default:function(){return i.a}});var r=n(24571),i=n.n(r)},46343:function(e,t){"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{DOMAttributeNames:function(){return r},default:function(){return o},isEqualNode:function(){return s}});let r={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv",noModule:"noModule"};function i(e){let{type:t,props:n}=e,i=document.createElement(t);for(let e in n){if(!n.hasOwnProperty(e)||"children"===e||"dangerouslySetInnerHTML"===e||void 0===n[e])continue;let s=r[e]||e.toLowerCase();"script"===t&&("async"===s||"defer"===s||"noModule"===s)?i[s]=!!n[e]:i.setAttribute(s,n[e])}let{children:s,dangerouslySetInnerHTML:o}=n;return o?i.innerHTML=o.__html||"":s&&(i.textContent="string"==typeof s?s:Array.isArray(s)?s.join(""):""),i}function s(e,t){if(e instanceof HTMLElement&&t instanceof HTMLElement){let n=t.getAttribute("nonce");if(n&&!e.getAttribute("nonce")){let r=t.cloneNode(!0);return r.setAttribute("nonce",""),r.nonce=n,n===e.nonce&&e.isEqualNode(r)}}return e.isEqualNode(t)}function o(){return{mountedInstances:new Set,updateHead:e=>{let t={};e.forEach(e=>{if("link"===e.type&&e.props["data-optimized-fonts"]){if(document.querySelector('style[data-href="'+e.props["data-href"]+'"]'))return;e.props.href=e.props["data-href"],e.props["data-href"]=void 0}let n=t[e.type]||[];n.push(e),t[e.type]=n});let r=t.title?t.title[0]:null,i="";if(r){let{children:e}=r.props;i="string"==typeof e?e:Array.isArray(e)?e.join(""):""}i!==document.title&&(document.title=i),["meta","base","link","style","script"].forEach(e=>{n(e,t[e]||[])})}}}n=(e,t)=>{let n=document.getElementsByTagName("head")[0],r=n.querySelector("meta[name=next-head-count]"),o=Number(r.content),a=[];for(let t=0,n=r.previousElementSibling;t<o;t++,n=(null==n?void 0:n.previousElementSibling)||null){var u;(null==n?void 0:null==(u=n.tagName)?void 0:u.toLowerCase())===e&&a.push(n)}let c=t.map(i).filter(e=>{for(let t=0,n=a.length;t<n;t++)if(s(a[t],e))return a.splice(t,1),!1;return!0});a.forEach(e=>{var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)}),c.forEach(e=>n.insertBefore(e,r)),r.content=(o-a.length+c.length).toString()},("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},24571:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return v},handleClientScriptLoad:function(){return m},initScriptLoader:function(){return b}});let r=n(31675),i=n(35063),s=n(10250),o=r._(n(66824)),a=i._(n(21956)),u=n(64420),c=n(46343),l=n(76812),h=new Map,d=new Set,f=["onLoad","onReady","dangerouslySetInnerHTML","children","onError","strategy","stylesheets"],p=e=>{if(o.default.preinit){e.forEach(e=>{o.default.preinit(e,{as:"style"})});return}if("undefined"!=typeof window){let t=document.head;e.forEach(e=>{let n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=e,t.appendChild(n)})}},_=e=>{let{src:t,id:n,onLoad:r=()=>{},onReady:i=null,dangerouslySetInnerHTML:s,children:o="",strategy:a="afterInteractive",onError:u,stylesheets:l}=e,_=n||t;if(_&&d.has(_))return;if(h.has(t)){d.add(_),h.get(t).then(r,u);return}let m=()=>{i&&i(),d.add(_)},b=document.createElement("script"),g=new Promise((e,t)=>{b.addEventListener("load",function(t){e(),r&&r.call(this,t),m()}),b.addEventListener("error",function(e){t(e)})}).catch(function(e){u&&u(e)});for(let[n,r]of(s?(b.innerHTML=s.__html||"",m()):o?(b.textContent="string"==typeof o?o:Array.isArray(o)?o.join(""):"",m()):t&&(b.src=t,h.set(t,g)),Object.entries(e))){if(void 0===r||f.includes(n))continue;let e=c.DOMAttributeNames[n]||n.toLowerCase();b.setAttribute(e,r)}"worker"===a&&b.setAttribute("type","text/partytown"),b.setAttribute("data-nscript",a),l&&p(l),document.body.appendChild(b)};function m(e){let{strategy:t="afterInteractive"}=e;"lazyOnload"===t?window.addEventListener("load",()=>{(0,l.requestIdleCallback)(()=>_(e))}):_(e)}function b(e){e.forEach(m),[...document.querySelectorAll('[data-nscript="beforeInteractive"]'),...document.querySelectorAll('[data-nscript="beforePageRender"]')].forEach(e=>{let t=e.id||e.getAttribute("src");d.add(t)})}function g(e){let{id:t,src:n="",onLoad:r=()=>{},onReady:i=null,strategy:c="afterInteractive",onError:h,stylesheets:f,...p}=e,{updateScripts:m,scripts:b,getIsSsr:g,appDir:v,nonce:y}=(0,a.useContext)(u.HeadManagerContext),w=(0,a.useRef)(!1);(0,a.useEffect)(()=>{let e=t||n;w.current||(i&&e&&d.has(e)&&i(),w.current=!0)},[i,t,n]);let S=(0,a.useRef)(!1);if((0,a.useEffect)(()=>{!S.current&&("afterInteractive"===c?_(e):"lazyOnload"===c&&("complete"===document.readyState?(0,l.requestIdleCallback)(()=>_(e)):window.addEventListener("load",()=>{(0,l.requestIdleCallback)(()=>_(e))})),S.current=!0)},[e,c]),("beforeInteractive"===c||"worker"===c)&&(m?(b[c]=(b[c]||[]).concat([{id:t,src:n,onLoad:r,onReady:i,onError:h,...p}]),m(b)):g&&g()?d.add(t||n):g&&!g()&&_(e)),v){if(f&&f.forEach(e=>{o.default.preinit(e,{as:"style"})}),"beforeInteractive"===c)return n?(o.default.preload(n,p.integrity?{as:"script",integrity:p.integrity,nonce:y,crossOrigin:p.crossOrigin}:{as:"script",nonce:y,crossOrigin:p.crossOrigin}),(0,s.jsx)("script",{nonce:y,dangerouslySetInnerHTML:{__html:"(self.__next_s=self.__next_s||[]).push("+JSON.stringify([n,{...p,id:t}])+")"}})):(p.dangerouslySetInnerHTML&&(p.children=p.dangerouslySetInnerHTML.__html,delete p.dangerouslySetInnerHTML),(0,s.jsx)("script",{nonce:y,dangerouslySetInnerHTML:{__html:"(self.__next_s=self.__next_s||[]).push("+JSON.stringify([0,{...p,id:t}])+")"}}));"afterInteractive"===c&&n&&o.default.preload(n,p.integrity?{as:"script",integrity:p.integrity,nonce:y,crossOrigin:p.crossOrigin}:{as:"script",nonce:y,crossOrigin:p.crossOrigin})}return null}Object.defineProperty(g,"__nextScript",{value:!0});let v=g;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5891:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(21956)),i=a(n(55190)),s=a(n(56235)),o=["onSuccess","onError","skipScript","authOptions","iconProps","render","uiType","className","noDefaultStyle","buttonExtraChildren"];function a(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var l="\n.react-apple-signin-auth-btn {\n  background-color: transparent;\n  border: none;\n  padding: 0;\n  cursor: pointer;\n  border-radius: 4px;\n  padding: 0 8px 0 2px;\n  font-size: 14px;\n  font-size: 1em;\n  line-height: 1;\n  border: 1px solid #000;\n  overflow: hidden;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n}\n.react-apple-signin-auth-btn-light {\n  background-color: #FFF;\n  color: #000;\n  border-color: #000;\n}\n.react-apple-signin-auth-btn-dark {\n  background-color: #000;\n  color: #FFF;\n  border-color: #FFF;\n}".replace(/ {2}|\n/g,"");t.default=function(e){var t=e.onSuccess,n=e.onError,a=e.skipScript,h=e.authOptions,d=e.iconProps,f=e.render,p=e.uiType,_=void 0===p?"dark":p,m=e.className,b=e.noDefaultStyle,g=void 0!==b&&b,v=e.buttonExtraChildren,y=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,o);(0,i.default)(void 0!==a&&a?null:s.default.APPLE_SCRIPT_SRC);var w=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({children:r.default.createElement(r.default.Fragment,null,r.default.createElement("svg",u({width:"24px",height:"44px",viewBox:"0 0 24 44"},d),r.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.default.createElement("rect",{fill:"light"===_?"#FFF":"#000",x:"0",y:"0",width:"24",height:"44"}),r.default.createElement("path",{d:"M12.2337427,16.9879688 C12.8896607,16.9879688 13.7118677,16.5445313 14.2014966,15.9532812 C14.6449341,15.4174609 14.968274,14.6691602 14.968274,13.9208594 C14.968274,13.8192383 14.9590357,13.7176172 14.9405591,13.6344727 C14.2107349,13.6621875 13.3330982,14.1241016 12.8065162,14.7430664 C12.3907935,15.2142188 12.012024,15.9532812 12.012024,16.7108203 C12.012024,16.8216797 12.0305005,16.9325391 12.0397388,16.9694922 C12.0859302,16.9787305 12.1598365,16.9879688 12.2337427,16.9879688 Z M9.92417241,28.1662891 C10.8202857,28.1662891 11.2175318,27.5658008 12.3353638,27.5658008 C13.4716724,27.5658008 13.721106,28.1478125 14.7188404,28.1478125 C15.6980982,28.1478125 16.3540162,27.2424609 16.972981,26.3555859 C17.6658521,25.339375 17.9522388,24.3416406 17.9707154,24.2954492 C17.9060474,24.2769727 16.0306763,23.5101953 16.0306763,21.3576758 C16.0306763,19.491543 17.5088013,18.6508594 17.5919459,18.5861914 C16.612688,17.1819727 15.1253248,17.1450195 14.7188404,17.1450195 C13.6194849,17.1450195 12.7233716,17.8101758 12.1598365,17.8101758 C11.5501099,17.8101758 10.7463794,17.1819727 9.79483648,17.1819727 C7.98413335,17.1819727 6.14571538,18.6785742 6.14571538,21.5054883 C6.14571538,23.2607617 6.8293482,25.1176563 7.67003179,26.3186328 C8.39061773,27.3348438 9.01882085,28.1662891 9.92417241,28.1662891 Z",fill:"light"===_?"#000":"#FFF",fillRule:"nonzero"}))),void 0===v?"Continue with Apple":v),onClick:function(e){e&&(e.preventDefault(),e.stopPropagation()),s.default.signIn({authOptions:h,onSuccess:t,onError:n})}},y);return f?f(w):r.default.createElement(r.default.Fragment,null,r.default.createElement("button",u({className:"".concat(g?"":"react-apple-signin-auth-btn react-apple-signin-auth-btn-".concat(_)).concat(m?" ".concat(m):""),type:"button","aria-label":"Signin with apple ID"},w)),g?null:r.default.createElement("style",null,l))}},56235:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(86129))&&r.__esModule?r:{default:r};t.default={APPLE_SCRIPT_SRC:"https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",signIn:function(e){var t=e.authOptions,n=e.onSuccess,r=e.onError;return(0,i.default)("AppleID").then(function(){return window.AppleID||console.error(Error("Error loading apple script")),window.AppleID.auth.init(t),window.AppleID.auth.signIn().then(function(e){return n&&n(e),e}).catch(function(e){return r?r(e):console.error(e),null})}).catch(function(e){return r?r(e):console.error(e),null})}}},55190:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(21956);t.default=function(e){(0,r.useEffect)(function(){if(e){var t=document.querySelectorAll('script[src="'.concat(e,'"]'))[0];t||((t=document.createElement("script")).src=e,t.async=!0,document.body.appendChild(t))}},[e])}},32062:function(e,t,n){"use strict";t.ZP=void 0;var r=i(n(5891));function i(e){return e&&e.__esModule?e:{default:e}}i(n(56235)),i(n(55190));var s=r.default;t.ZP=s},86129:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{pollFrequency:1e3,retries:100,parent:window},r=n.pollFrequency,i=void 0===r?1e3:r,s=n.retries,o=void 0===s?100:s,a=n.parent,u=void 0===a?window:a;if(u&&u.hasOwnProperty(t))return Promise.resolve(u[t]);if(!o)return Promise.resolve(void 0);var c=o-1;return new Promise(function(e){return setTimeout(e,"function"==typeof i?i({retries:c}):i)}).then(function(){return e(t,{pollFrequency:i,parent:u,retries:c})})}},30709:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21956),i=r&&"object"==typeof r&&"default"in r?r:{default:r};!function(e){if(!e||"undefined"==typeof window)return;let t=document.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t)}('.rfm-marquee-container {\n  overflow-x: hidden;\n  display: flex;\n  flex-direction: row;\n  position: relative;\n  width: var(--width);\n  transform: var(--transform);\n}\n.rfm-marquee-container:hover div {\n  animation-play-state: var(--pause-on-hover);\n}\n.rfm-marquee-container:active div {\n  animation-play-state: var(--pause-on-click);\n}\n\n.rfm-overlay {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.rfm-overlay::before, .rfm-overlay::after {\n  background: linear-gradient(to right, var(--gradient-color), rgba(255, 255, 255, 0));\n  content: "";\n  height: 100%;\n  position: absolute;\n  width: var(--gradient-width);\n  z-index: 2;\n  pointer-events: none;\n  touch-action: none;\n}\n.rfm-overlay::after {\n  right: 0;\n  top: 0;\n  transform: rotateZ(180deg);\n}\n.rfm-overlay::before {\n  left: 0;\n  top: 0;\n}\n\n.rfm-marquee {\n  flex: 0 0 auto;\n  min-width: var(--min-width);\n  z-index: 1;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  animation: scroll var(--duration) linear var(--delay) var(--iteration-count);\n  animation-play-state: var(--play);\n  animation-delay: var(--delay);\n  animation-direction: var(--direction);\n}\n@keyframes scroll {\n  0% {\n    transform: translateX(0%);\n  }\n  100% {\n    transform: translateX(-100%);\n  }\n}\n\n.rfm-initial-child-container {\n  flex: 0 0 auto;\n  display: flex;\n  min-width: auto;\n  flex-direction: row;\n  align-items: center;\n}\n\n.rfm-child {\n  transform: var(--transform);\n}');let s=r.forwardRef(function(e,t){let{style:n={},className:s="",autoFill:o=!1,play:a=!0,pauseOnHover:u=!1,pauseOnClick:c=!1,direction:l="left",speed:h=50,delay:d=0,loop:f=0,gradient:p=!1,gradientColor:_="white",gradientWidth:m=200,onFinish:b,onCycleComplete:g,onMount:v,children:y}=e,[w,S]=r.useState(0),[C,O]=r.useState(0),[T,E]=r.useState(1),[P,k]=r.useState(!1),j=r.useRef(null),x=t||j,R=r.useRef(null),D=r.useCallback(()=>{if(R.current&&x.current){let e=x.current.getBoundingClientRect(),t=R.current.getBoundingClientRect(),n=e.width,r=t.width;("up"===l||"down"===l)&&(n=e.height,r=t.height),o&&n&&r?E(r<n?Math.ceil(n/r):1):E(1),S(n),O(r)}},[o,x,l]);r.useEffect(()=>{if(P&&(D(),R.current&&x.current)){let e=new ResizeObserver(()=>D());return e.observe(x.current),e.observe(R.current),()=>{e&&e.disconnect()}}},[D,x,P]),r.useEffect(()=>{D()},[D,y]),r.useEffect(()=>{k(!0)},[]),r.useEffect(()=>{"function"==typeof v&&v()},[]);let M=r.useMemo(()=>o?C*T/h:C<w?w/h:C/h,[o,w,C,T,h]),I=r.useMemo(()=>Object.assign(Object.assign({},n),{"--pause-on-hover":!a||u?"paused":"running","--pause-on-click":!a||u&&!c||c?"paused":"running","--width":"up"===l||"down"===l?"100vh":"100%","--transform":"up"===l?"rotate(-90deg)":"down"===l?"rotate(90deg)":"none"}),[n,a,u,c,l]),L=r.useMemo(()=>({"--gradient-color":_,"--gradient-width":"number"==typeof m?"".concat(m,"px"):m}),[_,m]),A=r.useMemo(()=>({"--play":a?"running":"paused","--direction":"left"===l?"normal":"reverse","--duration":"".concat(M,"s"),"--delay":"".concat(d,"s"),"--iteration-count":f?"".concat(f):"infinite","--min-width":o?"auto":"100%"}),[a,l,M,d,f,o]),$=r.useMemo(()=>({"--transform":"up"===l?"rotate(90deg)":"down"===l?"rotate(-90deg)":"none"}),[l]),N=r.useCallback(e=>[...Array(Number.isFinite(e)&&e>=0?e:0)].map((e,t)=>i.default.createElement(r.Fragment,{key:t},r.Children.map(y,e=>i.default.createElement("div",{style:$,className:"rfm-child"},e)))),[$,y]);return P?i.default.createElement("div",{ref:x,style:I,className:"rfm-marquee-container "+s},p&&i.default.createElement("div",{style:L,className:"rfm-overlay"}),i.default.createElement("div",{className:"rfm-marquee",style:A,onAnimationIteration:g,onAnimationEnd:b},i.default.createElement("div",{className:"rfm-initial-child-container",ref:R},r.Children.map(y,e=>i.default.createElement("div",{style:$,className:"rfm-child"},e))),N(T-1)),i.default.createElement("div",{className:"rfm-marquee",style:A},N(T))):null});t.default=s},85633:function(e,t,n){"use strict";var r,i=(r=n(71252))&&r.__esModule?r:{default:r};e.exports={tags:function(e){var t=e.id,n=e.events,r=e.dataLayer,s=e.dataLayerName,o=e.preview,a="&gtm_auth="+e.auth,u="&gtm_preview="+o;t||(0,i.default)("GTM Id is required");var c="\n      (function(w,d,s,l,i){w[l]=w[l]||[];\n        w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js', "+JSON.stringify(n).slice(1,-1)+"});\n        var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';\n        j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl+'"+a+u+"&gtm_cookies_win=x';\n        f.parentNode.insertBefore(j,f);\n      })(window,document,'script','"+s+"','"+t+"');";return{iframe:'\n      <iframe src="https://www.googletagmanager.com/ns.html?id='+t+a+u+'&gtm_cookies_win=x"\n        height="0" width="0" style="display:none;visibility:hidden" id="tag-manager"></iframe>',script:c,dataLayerVar:this.dataLayer(r,s)}},dataLayer:function(e,t){return"\n      window."+t+" = window."+t+" || [];\n      window."+t+".push("+JSON.stringify(e)+")"}}},80847:function(e,t,n){"use strict";var r,i=(r=n(85633))&&r.__esModule?r:{default:r};e.exports={dataScript:function(e){var t=document.createElement("script");return t.innerHTML=e,t},gtm:function(e){var t=i.default.tags(e);return{noScript:function(){var e=document.createElement("noscript");return e.innerHTML=t.iframe,e},script:function(){var e=document.createElement("script");return e.innerHTML=t.script,e},dataScript:this.dataScript(t.dataLayerVar)}},initialize:function(e){var t=e.gtmId,n=e.events,r=e.dataLayer,i=e.dataLayerName,s=e.auth,o=e.preview,a=this.gtm({id:t,events:void 0===n?{}:n,dataLayer:r||void 0,dataLayerName:void 0===i?"dataLayer":i,auth:void 0===s?"":s,preview:void 0===o?"":o});r&&document.head.appendChild(a.dataScript),document.head.insertBefore(a.script(),document.head.childNodes[0]),document.body.insertBefore(a.noScript(),document.body.childNodes[0])},dataLayer:function(e){var t=e.dataLayer,n=e.dataLayerName,r=void 0===n?"dataLayer":n;if(window[r])return window[r].push(t);var s=i.default.dataLayer(t,r),o=this.dataScript(s);document.head.insertBefore(o,document.head.childNodes[0])}}},6130:function(e,t,n){"use strict";var r,i=(r=n(80847))&&r.__esModule?r:{default:r};e.exports=i.default},71252:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){console.warn("[react-gtm]",e)}},74496:function(){},37005:function(e){e.exports={style:{fontFamily:"'__Roboto_Mono_56c07f', '__Roboto_Mono_Fallback_56c07f'"},className:"__className_56c07f",variable:"__variable_56c07f"}},83635:function(e,t,n){"use strict";n.d(t,{$N:function(){return F},Dx:function(){return en},VY:function(){return et},Vq:function(){return O},aV:function(){return ee},cZ:function(){return L},dk:function(){return er},fC:function(){return J},h_:function(){return X},x8:function(){return ei},xz:function(){return G}});var r=n(21956),i=n(87192),s=n(22655),o=n(96182),a=n(84995),u=n(2171),c=n(69561),l=n(27592),h=n(51295),d=n(71114),f=n(35450),p=n(6694),_=n(5095),m=n(78355),b=n(31650),g=n(10250),v="Dialog",[y,w]=(0,o.b)(v),[S,C]=y(v),O=e=>{let{__scopeDialog:t,children:n,open:i,defaultOpen:s,onOpenChange:o,modal:c=!0}=e,l=r.useRef(null),h=r.useRef(null),[d=!1,f]=(0,u.T)({prop:i,defaultProp:s,onChange:o});return(0,g.jsx)(S,{scope:t,triggerRef:l,contentRef:h,contentId:(0,a.M)(),titleId:(0,a.M)(),descriptionId:(0,a.M)(),open:d,onOpenChange:f,onOpenToggle:r.useCallback(()=>f(e=>!e),[f]),modal:c,children:n})};O.displayName=v;var T="DialogTrigger",E=r.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,o=C(T,n),a=(0,s.e)(t,o.triggerRef);return(0,g.jsx)(f.WV.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":H(o.open),...r,ref:a,onClick:(0,i.M)(e.onClick,o.onOpenToggle)})});E.displayName=T;var P="DialogPortal",[k,j]=y(P,{forceMount:void 0}),x=e=>{let{__scopeDialog:t,forceMount:n,children:i,container:s}=e,o=C(P,t);return(0,g.jsx)(k,{scope:t,forceMount:n,children:r.Children.map(i,e=>(0,g.jsx)(d.z,{present:n||o.open,children:(0,g.jsx)(h.h,{asChild:!0,container:s,children:e})}))})};x.displayName=P;var R="DialogOverlay",D=r.forwardRef((e,t)=>{let n=j(R,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=C(R,e.__scopeDialog);return s.modal?(0,g.jsx)(d.z,{present:r||s.open,children:(0,g.jsx)(M,{...i,ref:t})}):null});D.displayName=R;var M=r.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,i=C(R,n);return(0,g.jsx)(_.Z,{as:b.g7,allowPinchZoom:!0,shards:[i.contentRef],children:(0,g.jsx)(f.WV.div,{"data-state":H(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),I="DialogContent",L=r.forwardRef((e,t)=>{let n=j(I,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=C(I,e.__scopeDialog);return(0,g.jsx)(d.z,{present:r||s.open,children:s.modal?(0,g.jsx)(A,{...i,ref:t}):(0,g.jsx)($,{...i,ref:t})})});L.displayName=I;var A=r.forwardRef((e,t)=>{let n=C(I,e.__scopeDialog),o=r.useRef(null),a=(0,s.e)(t,n.contentRef,o);return r.useEffect(()=>{let e=o.current;if(e)return(0,m.Ry)(e)},[]),(0,g.jsx)(N,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,i.M)(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null===(t=n.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:(0,i.M)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:(0,i.M)(e.onFocusOutside,e=>e.preventDefault())})}),$=r.forwardRef((e,t)=>{let n=C(I,e.__scopeDialog),i=r.useRef(!1),s=r.useRef(!1);return(0,g.jsx)(N,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var r,o;null===(r=e.onCloseAutoFocus)||void 0===r||r.call(e,t),t.defaultPrevented||(i.current||null===(o=n.triggerRef.current)||void 0===o||o.focus(),t.preventDefault()),i.current=!1,s.current=!1},onInteractOutside:t=>{var r,o;null===(r=e.onInteractOutside)||void 0===r||r.call(e,t),t.defaultPrevented||(i.current=!0,"pointerdown"!==t.detail.originalEvent.type||(s.current=!0));let a=t.target;(null===(o=n.triggerRef.current)||void 0===o?void 0:o.contains(a))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})}),N=r.forwardRef((e,t)=>{let{__scopeDialog:n,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:a,...u}=e,h=C(I,n),d=r.useRef(null),f=(0,s.e)(t,d);return(0,p.EW)(),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(l.M,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:o,onUnmountAutoFocus:a,children:(0,g.jsx)(c.XB,{role:"dialog",id:h.contentId,"aria-describedby":h.descriptionId,"aria-labelledby":h.titleId,"data-state":H(h.open),...u,ref:f,onDismiss:()=>h.onOpenChange(!1)})}),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Y,{titleId:h.titleId}),(0,g.jsx)(K,{contentRef:d,descriptionId:h.descriptionId})]})]})}),q="DialogTitle",F=r.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,i=C(q,n);return(0,g.jsx)(f.WV.h2,{id:i.titleId,...r,ref:t})});F.displayName=q;var U="DialogDescription",Z=r.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,i=C(U,n);return(0,g.jsx)(f.WV.p,{id:i.descriptionId,...r,ref:t})});Z.displayName=U;var z="DialogClose",B=r.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,s=C(z,n);return(0,g.jsx)(f.WV.button,{type:"button",...r,ref:t,onClick:(0,i.M)(e.onClick,()=>s.onOpenChange(!1))})});function H(e){return e?"open":"closed"}B.displayName=z;var V="DialogTitleWarning",[Q,W]=(0,o.k)(V,{contentName:I,titleName:q,docsSlug:"dialog"}),Y=e=>{let{titleId:t}=e,n=W(V),i="`".concat(n.contentName,"` requires a `").concat(n.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(n.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(n.docsSlug);return r.useEffect(()=>{t&&!document.getElementById(t)&&console.error(i)},[i,t]),null},K=e=>{let{contentRef:t,descriptionId:n}=e,i=W("DialogDescriptionWarning"),s="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(i.contentName,"}.");return r.useEffect(()=>{var e;let r=null===(e=t.current)||void 0===e?void 0:e.getAttribute("aria-describedby");n&&r&&!document.getElementById(n)&&console.warn(s)},[s,t,n]),null},J=O,G=E,X=x,ee=D,et=L,en=F,er=Z,ei=B},78255:function(e,t,n){"use strict";n.d(t,{Gm:function(){return i},Qy:function(){return a},ZF:function(){return u}});var r=n(39086);function i(e){return{onFetch:(t,n)=>{let i=async()=>{let n;let i=t.options,a=t.fetchOptions?.meta?.fetchMore?.direction,u=t.state.data?.pages||[],c=t.state.data?.pageParams||[],l=!1,h=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(t.signal.aborted?l=!0:t.signal.addEventListener("abort",()=>{l=!0}),t.signal)})},d=(0,r.cG)(t.options,t.fetchOptions),f=async(e,n,i)=>{if(l)return Promise.reject();if(null==n&&e.pages.length)return Promise.resolve(e);let s={queryKey:t.queryKey,pageParam:n,direction:i?"backward":"forward",meta:t.options.meta};h(s);let o=await d(s),{maxPages:a}=t.options,u=i?r.Ht:r.VX;return{pages:u(e.pages,o,a),pageParams:u(e.pageParams,n,a)}};if(a&&u.length){let e="backward"===a,t={pages:u,pageParams:c},r=(e?o:s)(i,t);n=await f(t,r,e)}else{n=await f({pages:[],pageParams:[]},c[0]??i.initialPageParam);let t=e??u.length;for(let e=1;e<t;e++){let e=s(i,n);if(null==e)break;n=await f(n,e)}}return n};t.options.persister?t.fetchFn=()=>t.options.persister?.(i,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=i}}}function s(e,{pages:t,pageParams:n}){let r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function o(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}function a(e,t){return!!t&&null!=s(e,t)}function u(e,t){return!!t&&!!e.getPreviousPageParam&&null!=o(e,t)}},52763:function(e,t,n){"use strict";n.d(t,{R:function(){return a},m:function(){return o}});var r=n(14677),i=n(35448),s=n(72142),o=class extends i.F{#e;#t;#n;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||a(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||("pending"===this.state.status?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(e){this.#n=(0,s.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{this.#r({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});let t="pending"===this.state.status,n=!this.#n.canStart();try{if(!t){this.#r({type:"pending",variables:e,isPaused:n}),await this.#t.config.onMutate?.(e,this);let t=await this.options.onMutate?.(e);t!==this.state.context&&this.#r({type:"pending",context:t,variables:e,isPaused:n})}let r=await this.#n.start();return await this.#t.config.onSuccess?.(r,e,this.state.context,this),await this.options.onSuccess?.(r,e,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,e,this.state.context),this.#r({type:"success",data:r}),r}catch(t){try{throw await this.#t.config.onError?.(t,e,this.state.context,this),await this.options.onError?.(t,e,this.state.context),await this.#t.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,t,e,this.state.context),t}finally{this.#r({type:"error",error:t})}}finally{this.#t.runNext(this)}}#r(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),r.V.batch(()=>{this.#e.forEach(t=>{t.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function a(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},3009:function(e,t,n){"use strict";n.d(t,{S:function(){return p}});var r=n(39086),i=n(8564),s=n(14677),o=n(86540),a=class extends o.l{constructor(e={}){super(),this.config=e,this.#i=new Map}#i;build(e,t,n){let s=t.queryKey,o=t.queryHash??(0,r.Rm)(s,t),a=this.get(o);return a||(a=new i.A({cache:this,queryKey:s,queryHash:o,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){this.#i.has(e.queryHash)||(this.#i.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#i.get(e.queryHash);t&&(e.destroy(),t===e&&this.#i.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){s.V.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#i.get(e)}getAll(){return[...this.#i.values()]}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,r._x)(t,e))}findAll(e={}){let t=this.getAll();return Object.keys(e).length>0?t.filter(t=>(0,r._x)(e,t)):t}notify(e){s.V.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){s.V.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){s.V.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},u=n(52763),c=class extends o.l{constructor(e={}){super(),this.config=e,this.#s=new Map,this.#o=Date.now()}#s;#o;build(e,t,n){let r=new u.m({mutationCache:this,mutationId:++this.#o,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){let t=l(e),n=this.#s.get(t)??[];n.push(e),this.#s.set(t,n),this.notify({type:"added",mutation:e})}remove(e){let t=l(e);if(this.#s.has(t)){let n=this.#s.get(t)?.filter(t=>t!==e);n&&(0===n.length?this.#s.delete(t):this.#s.set(t,n))}this.notify({type:"removed",mutation:e})}canRun(e){let t=this.#s.get(l(e))?.find(e=>"pending"===e.state.status);return!t||t===e}runNext(e){let t=this.#s.get(l(e))?.find(t=>t!==e&&t.state.isPaused);return t?.continue()??Promise.resolve()}clear(){s.V.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...this.#s.values()].flat()}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,r.X7)(t,e))}findAll(e={}){return this.getAll().filter(t=>(0,r.X7)(e,t))}notify(e){s.V.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return s.V.batch(()=>Promise.all(e.map(e=>e.continue().catch(r.ZT))))}};function l(e){return e.options.scope?.id??String(e.mutationId)}var h=n(81298),d=n(1512),f=n(78255),p=class{#a;#t;#u;#c;#l;#h;#d;#f;constructor(e={}){this.#a=e.queryCache||new a,this.#t=e.mutationCache||new c,this.#u=e.defaultOptions||{},this.#c=new Map,this.#l=new Map,this.#h=0}mount(){this.#h++,1===this.#h&&(this.#d=h.j.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#a.onFocus())}),this.#f=d.N.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#a.onOnline())}))}unmount(){this.#h--,0===this.#h&&(this.#d?.(),this.#d=void 0,this.#f?.(),this.#f=void 0)}isFetching(e){return this.#a.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){let t=this.defaultQueryOptions({queryKey:e});return this.#a.get(t.queryHash)?.state.data}ensureQueryData(e){let t=this.getQueryData(e.queryKey);if(void 0===t)return this.fetchQuery(e);{let n=this.defaultQueryOptions(e),i=this.#a.build(this,n);return e.revalidateIfStale&&i.isStaleByTime((0,r.KC)(n.staleTime,i))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return this.#a.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){let i=this.defaultQueryOptions({queryKey:e}),s=this.#a.get(i.queryHash),o=s?.state.data,a=(0,r.SE)(t,o);if(void 0!==a)return this.#a.build(this,i).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return s.V.batch(()=>this.#a.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e){let t=this.defaultQueryOptions({queryKey:e});return this.#a.get(t.queryHash)?.state}removeQueries(e){let t=this.#a;s.V.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){let n=this.#a,r={type:"active",...e};return s.V.batch(()=>(n.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){let n={revert:!0,...t};return Promise.all(s.V.batch(()=>this.#a.findAll(e).map(e=>e.cancel(n)))).then(r.ZT).catch(r.ZT)}invalidateQueries(e={},t={}){return s.V.batch(()=>{if(this.#a.findAll(e).forEach(e=>{e.invalidate()}),"none"===e.refetchType)return Promise.resolve();let n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){let n={...t,cancelRefetch:t?.cancelRefetch??!0};return Promise.all(s.V.batch(()=>this.#a.findAll(e).filter(e=>!e.isDisabled()).map(e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(r.ZT)),"paused"===e.state.fetchStatus?Promise.resolve():t}))).then(r.ZT)}fetchQuery(e){let t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);let n=this.#a.build(this,t);return n.isStaleByTime((0,r.KC)(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(r.ZT).catch(r.ZT)}fetchInfiniteQuery(e){return e.behavior=(0,f.Gm)(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(r.ZT).catch(r.ZT)}resumePausedMutations(){return d.N.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#a}getMutationCache(){return this.#t}getDefaultOptions(){return this.#u}setDefaultOptions(e){this.#u=e}setQueryDefaults(e,t){this.#c.set((0,r.Ym)(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){let t=[...this.#c.values()],n={};return t.forEach(t=>{(0,r.to)(e,t.queryKey)&&(n={...n,...t.defaultOptions})}),n}setMutationDefaults(e,t){this.#l.set((0,r.Ym)(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){let t=[...this.#l.values()],n={};return t.forEach(t=>{(0,r.to)(e,t.mutationKey)&&(n={...n,...t.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;let t={...this.#u.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=(0,r.Rm)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),!0!==t.enabled&&t.queryFn===r.CN&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#u.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#a.clear(),this.#t.clear()}}},74111:function(e,t,n){"use strict";n.d(t,{t:function(){return r}});var r=function(){return null}},65598:function(e,t,n){"use strict";n.d(t,{D:function(){return h}});var r=n(21956),i=n(52763),s=n(14677),o=n(86540),a=n(39086),u=class extends o.l{#p;#_=void 0;#m;#b;constructor(e,t){super(),this.#p=e,this.setOptions(t),this.bindMethods(),this.#g()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#p.defaultMutationOptions(e),(0,a.VS)(this.options,t)||this.#p.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#m,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,a.Ym)(t.mutationKey)!==(0,a.Ym)(this.options.mutationKey)?this.reset():this.#m?.state.status==="pending"&&this.#m.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#m?.removeObserver(this)}onMutationUpdate(e){this.#g(),this.#v(e)}getCurrentResult(){return this.#_}reset(){this.#m?.removeObserver(this),this.#m=void 0,this.#g(),this.#v()}mutate(e,t){return this.#b=t,this.#m?.removeObserver(this),this.#m=this.#p.getMutationCache().build(this.#p,this.options),this.#m.addObserver(this),this.#m.execute(e)}#g(){let e=this.#m?.state??(0,i.R)();this.#_={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#v(e){s.V.batch(()=>{if(this.#b&&this.hasListeners()){let t=this.#_.variables,n=this.#_.context;e?.type==="success"?(this.#b.onSuccess?.(e.data,t,n),this.#b.onSettled?.(e.data,null,t,n)):e?.type==="error"&&(this.#b.onError?.(e.error,t,n),this.#b.onSettled?.(void 0,e.error,t,n))}this.listeners.forEach(e=>{e(this.#_)})})}},c=n(20273),l=n(89707);function h(e,t){let n=(0,c.NL)(t),[i]=r.useState(()=>new u(n,e));r.useEffect(()=>{i.setOptions(e)},[i,e]);let o=r.useSyncExternalStore(r.useCallback(e=>i.subscribe(s.V.batchCalls(e)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),a=r.useCallback((e,t)=>{i.mutate(e,t).catch(l.Z)},[i]);if(o.error&&(0,l.L)(i.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:a,mutateAsync:o.mutate}}},7794:function(e,t,n){"use strict";function r(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}n.d(t,{qX:function(){return J}}),"function"==typeof SuppressedError&&SuppressedError;var i,s,o,a,u,c,l,h,d,f,p,_,m,b,g,v,y={exports:{}},w="object"==typeof Reflect?Reflect:null,S=w&&"function"==typeof w.apply?w.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};d=w&&"function"==typeof w.ownKeys?w.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var C=Number.isNaN||function(e){return e!=e};function O(){O.init.call(this)}y.exports=O,y.exports.once=function(e,t){return new Promise(function(n,r){var i;function s(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",s),n([].slice.call(arguments))}I(e,t,o,{once:!0}),"error"!==t&&(i={once:!0},"function"==typeof e.on&&I(e,"error",s,i))})},O.EventEmitter=O,O.prototype._events=void 0,O.prototype._eventsCount=0,O.prototype._maxListeners=void 0;var T=10;function E(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function P(e){return void 0===e._maxListeners?O.defaultMaxListeners:e._maxListeners}function k(e,t,n,r){if(E(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]),void 0===o)o=s[t]=n,++e._eventsCount;else if("function"==typeof o?o=s[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=P(e))>0&&o.length>i&&!o.warned){o.warned=!0;var i,s,o,a=Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,console&&console.warn&&console.warn(a)}return e}function j(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function x(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=j.bind(r);return i.listener=n,r.wrapFn=i,i}function R(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):M(i,i.length)}function D(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function M(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function I(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else if("function"==typeof e.addEventListener)e.addEventListener(t,function i(s){r.once&&e.removeEventListener(t,i),n(s)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(O,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(e){if("number"!=typeof e||e<0||C(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");T=e}}),O.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},O.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||C(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},O.prototype.getMaxListeners=function(){return P(this)},O.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var s,o=Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var a=i[e];if(void 0===a)return!1;if("function"==typeof a)S(a,this,t);else for(var u=a.length,c=M(a,u),n=0;n<u;++n)S(c[n],this,t);return!0},O.prototype.addListener=function(e,t){return k(this,e,t,!1)},O.prototype.on=O.prototype.addListener,O.prototype.prependListener=function(e,t){return k(this,e,t,!0)},O.prototype.once=function(e,t){return E(t),this.on(e,x(this,e,t)),this},O.prototype.prependOnceListener=function(e,t){return E(t),this.prependListener(e,x(this,e,t)),this},O.prototype.removeListener=function(e,t){var n,r,i,s,o;if(E(t),void 0===(r=this._events)||void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},O.prototype.off=O.prototype.removeListener,O.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0==arguments.length){var i,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},O.prototype.listeners=function(e){return R(this,e,!0)},O.prototype.rawListeners=function(e){return R(this,e,!1)},O.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):D.call(e,t)},O.prototype.listenerCount=D,O.prototype.eventNames=function(){return this._eventsCount>0?d(this._events):[]};var L=(i=y.exports)&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;function A(e){return null!=e&&"function"==typeof e}function $(e,t,n){e>31&&(e=31);let r=Math.floor(Math.random()*(Math.min(n,t*Math.pow(2,e))-0+1)+0);return Math.min(n,t+r)}function N(e){return Math.min(1e3*e,2147483647)}(s=f||(f={}))[s.timeout=1]="timeout",s[s.transportClosed=2]="transportClosed",s[s.clientDisconnected=3]="clientDisconnected",s[s.clientClosed=4]="clientClosed",s[s.clientConnectToken=5]="clientConnectToken",s[s.clientRefreshToken=6]="clientRefreshToken",s[s.subscriptionUnsubscribed=7]="subscriptionUnsubscribed",s[s.subscriptionSubscribeToken=8]="subscriptionSubscribeToken",s[s.subscriptionRefreshToken=9]="subscriptionRefreshToken",s[s.transportWriteError=10]="transportWriteError",s[s.connectionClosed=11]="connectionClosed",s[s.badConfiguration=12]="badConfiguration",(o=p||(p={}))[o.connectCalled=0]="connectCalled",o[o.transportClosed=1]="transportClosed",o[o.noPing=2]="noPing",o[o.subscribeTimeout=3]="subscribeTimeout",o[o.unsubscribeError=4]="unsubscribeError",(a=_||(_={}))[a.disconnectCalled=0]="disconnectCalled",a[a.unauthorized=1]="unauthorized",a[a.badProtocol=2]="badProtocol",a[a.messageSizeLimit=3]="messageSizeLimit",(u=m||(m={}))[u.subscribeCalled=0]="subscribeCalled",u[u.transportClosed=1]="transportClosed",(c=b||(b={}))[c.unsubscribeCalled=0]="unsubscribeCalled",c[c.unauthorized=1]="unauthorized",c[c.clientClosed=2]="clientClosed",(l=g||(g={})).Disconnected="disconnected",l.Connecting="connecting",l.Connected="connected",(h=v||(v={})).Unsubscribed="unsubscribed",h.Subscribing="subscribing",h.Subscribed="subscribed";class q extends L{constructor(e,t,n){super(),this._resubscribeTimeout=null,this._refreshTimeout=null,this.channel=t,this.state=v.Unsubscribed,this._centrifuge=e,this._token="",this._getToken=null,this._data=null,this._getData=null,this._recover=!1,this._offset=null,this._epoch=null,this._recoverable=!1,this._positioned=!1,this._joinLeave=!1,this._minResubscribeDelay=500,this._maxResubscribeDelay=2e4,this._resubscribeTimeout=null,this._resubscribeAttempts=0,this._promises={},this._promiseId=0,this._inflight=!1,this._refreshTimeout=null,this._delta="",this._delta_negotiated=!1,this._prevValue=null,this._unsubPromise=Promise.resolve(),this._setOptions(n),this._centrifuge._debugEnabled?(this.on("state",e=>{this._debug("subscription state",t,e.oldState,"->",e.newState)}),this.on("error",e=>{this._debug("subscription error",t,e)})):this.on("error",function(){Function.prototype()})}ready(e){return this.state===v.Unsubscribed?Promise.reject({code:f.subscriptionUnsubscribed,message:this.state}):this.state===v.Subscribed?Promise.resolve():new Promise((t,n)=>{let r={resolve:t,reject:n};e&&(r.timeout=setTimeout(function(){n({code:f.timeout,message:"timeout"})},e)),this._promises[this._nextPromiseId()]=r})}subscribe(){this._isSubscribed()||(this._resubscribeAttempts=0,this._setSubscribing(m.subscribeCalled,"subscribe called"))}unsubscribe(){this._unsubPromise=this._setUnsubscribed(b.unsubscribeCalled,"unsubscribe called",!0)}publish(e){return r(this,void 0,void 0,function*(){return yield this._methodCall(),this._centrifuge.publish(this.channel,e)})}presence(){return r(this,void 0,void 0,function*(){return yield this._methodCall(),this._centrifuge.presence(this.channel)})}presenceStats(){return r(this,void 0,void 0,function*(){return yield this._methodCall(),this._centrifuge.presenceStats(this.channel)})}history(e){return r(this,void 0,void 0,function*(){return yield this._methodCall(),this._centrifuge.history(this.channel,e)})}_methodCall(){return this._isSubscribed()?Promise.resolve():this._isUnsubscribed()?Promise.reject({code:f.subscriptionUnsubscribed,message:this.state}):new Promise((e,t)=>{let n=setTimeout(()=>{t({code:f.timeout,message:"timeout"})},this._centrifuge._config.timeout);this._promises[this._nextPromiseId()]={timeout:n,resolve:e,reject:t}})}_nextPromiseId(){return++this._promiseId}_needRecover(){return!0===this._recover}_isUnsubscribed(){return this.state===v.Unsubscribed}_isSubscribing(){return this.state===v.Subscribing}_isSubscribed(){return this.state===v.Subscribed}_setState(e){if(this.state!==e){let t=this.state;return this.state=e,this.emit("state",{newState:e,oldState:t,channel:this.channel}),!0}return!1}_usesToken(){return""!==this._token||null!==this._getToken}_clearSubscribingState(){this._resubscribeAttempts=0,this._clearResubscribeTimeout()}_clearSubscribedState(){this._clearRefreshTimeout()}_setSubscribed(e){if(!this._isSubscribing())return;this._clearSubscribingState(),e.recoverable&&(this._recover=!0,this._offset=e.offset||0,this._epoch=e.epoch||""),e.delta?this._delta_negotiated=!0:this._delta_negotiated=!1,this._setState(v.Subscribed);let t=this._centrifuge._getSubscribeContext(this.channel,e);this.emit("subscribed",t),this._resolvePromises();let n=e.publications;if(n&&n.length>0)for(let e in n)n.hasOwnProperty(e)&&this._handlePublication(n[e]);!0===e.expires&&(this._refreshTimeout=setTimeout(()=>this._refresh(),N(e.ttl)))}_setSubscribing(e,t){return r(this,void 0,void 0,function*(){!this._isSubscribing()&&(this._isSubscribed()&&this._clearSubscribedState(),this._setState(v.Subscribing)&&this.emit("subscribing",{channel:this.channel,code:e,reason:t}),this._centrifuge._transport&&this._centrifuge._transport.emulation()&&(yield this._unsubPromise),this._isSubscribing()&&this._subscribe())})}_subscribe(){return(this._debug("subscribing on",this.channel),this._isTransportOpen())?this._inflight?null:(this._inflight=!0,this._canSubscribeWithoutGettingToken())?this._subscribeWithoutToken():(this._getSubscriptionToken().then(e=>this._handleTokenResponse(e)).catch(e=>this._handleTokenError(e)),null):(this._debug("delay subscribe on",this.channel,"till connected"),null)}_isTransportOpen(){return this._centrifuge._transportIsOpen}_canSubscribeWithoutGettingToken(){return!this._usesToken()||!!this._token}_subscribeWithoutToken(){return this._getData?(this._getDataAndSubscribe(this._token),null):this._sendSubscribe(this._token)}_getDataAndSubscribe(e){if(!this._getData){this._inflight=!1;return}this._getData({channel:this.channel}).then(t=>{if(!this._isSubscribing()){this._inflight=!1;return}this._data=t,this._sendSubscribe(e)}).catch(e=>this._handleGetDataError(e))}_handleGetDataError(e){if(!this._isSubscribing()){this._inflight=!1;return}if(e instanceof K){this._inflight=!1,this._failUnauthorized();return}this.emit("error",{type:"subscribeData",channel:this.channel,error:{code:f.badConfiguration,message:(null==e?void 0:e.toString())||""}}),this._inflight=!1,this._scheduleResubscribe()}_handleTokenResponse(e){if(!this._isSubscribing()){this._inflight=!1;return}if(!e){this._inflight=!1,this._failUnauthorized();return}this._token=e,this._getData?this._getDataAndSubscribe(e):this._sendSubscribe(e)}_handleTokenError(e){if(!this._isSubscribing()){this._inflight=!1;return}if(e instanceof K){this._inflight=!1,this._failUnauthorized();return}this.emit("error",{type:"subscribeToken",channel:this.channel,error:{code:f.subscriptionSubscribeToken,message:(null==e?void 0:e.toString())||""}}),this._inflight=!1,this._scheduleResubscribe()}_sendSubscribe(e){if(!this._isTransportOpen())return this._inflight=!1,null;let t=this._buildSubscribeCommand(e);return this._centrifuge._call(t).then(e=>{this._inflight=!1;let t=e.reply.subscribe;this._handleSubscribeResponse(t),e.next&&e.next()},e=>{this._inflight=!1,this._handleSubscribeError(e.error),e.next&&e.next()}),t}_buildSubscribeCommand(e){let t={channel:this.channel};if(e&&(t.token=e),this._data&&(t.data=this._data),this._positioned&&(t.positioned=!0),this._recoverable&&(t.recoverable=!0),this._joinLeave&&(t.join_leave=!0),this._needRecover()){t.recover=!0;let e=this._getOffset();e&&(t.offset=e);let n=this._getEpoch();n&&(t.epoch=n)}return this._delta&&(t.delta=this._delta),{subscribe:t}}_debug(...e){this._centrifuge._debug(...e)}_handleSubscribeError(e){if(this._isSubscribing()){if(e.code===f.timeout){this._centrifuge._disconnect(p.subscribeTimeout,"subscribe timeout",!0);return}this._subscribeError(e)}}_handleSubscribeResponse(e){this._isSubscribing()&&this._setSubscribed(e)}_setUnsubscribed(e,t,n){if(this._isUnsubscribed())return Promise.resolve();let r=Promise.resolve();return this._isSubscribed()?(n&&(r=this._centrifuge._unsubscribe(this)),this._clearSubscribedState()):this._isSubscribing()&&(this._inflight&&n&&(r=this._centrifuge._unsubscribe(this)),this._clearSubscribingState()),this._inflight=!1,this._setState(v.Unsubscribed)&&this.emit("unsubscribed",{channel:this.channel,code:e,reason:t}),this._rejectPromises({code:f.subscriptionUnsubscribed,message:this.state}),r}_handlePublication(e){if(this._delta&&this._delta_negotiated){let{newData:t,newPrevValue:n}=this._centrifuge._codec.applyDeltaIfNeeded(e,this._prevValue);e.data=t,this._prevValue=n}let t=this._centrifuge._getPublicationContext(this.channel,e);this.emit("publication",t),e.offset&&(this._offset=e.offset)}_handleJoin(e){let t=this._centrifuge._getJoinLeaveContext(e.info);this.emit("join",{channel:this.channel,info:t})}_handleLeave(e){let t=this._centrifuge._getJoinLeaveContext(e.info);this.emit("leave",{channel:this.channel,info:t})}_resolvePromises(){for(let e in this._promises)this._promises.hasOwnProperty(e)&&(this._promises[e].timeout&&clearTimeout(this._promises[e].timeout),this._promises[e].resolve(),delete this._promises[e])}_rejectPromises(e){for(let t in this._promises)this._promises.hasOwnProperty(t)&&(this._promises[t].timeout&&clearTimeout(this._promises[t].timeout),this._promises[t].reject(e),delete this._promises[t])}_scheduleResubscribe(){if(!this._isSubscribing()){this._debug("not in subscribing state, skip resubscribe scheduling",this.channel);return}let e=this,t=this._getResubscribeDelay();this._resubscribeTimeout=setTimeout(function(){e._isSubscribing()&&e._subscribe()},t),this._debug("resubscribe scheduled after "+t,this.channel)}_subscribeError(e){if(this._isSubscribing()){if(e.code<100||109===e.code||!0===e.temporary){109===e.code&&(this._token="");let t={channel:this.channel,type:"subscribe",error:e};this._centrifuge.state===g.Connected&&this.emit("error",t),this._scheduleResubscribe()}else this._setUnsubscribed(e.code,e.message,!1)}}_getResubscribeDelay(){let e=$(this._resubscribeAttempts,this._minResubscribeDelay,this._maxResubscribeDelay);return this._resubscribeAttempts++,e}_setOptions(e){if(e&&(e.since&&(this._offset=e.since.offset||0,this._epoch=e.since.epoch||"",this._recover=!0),e.data&&(this._data=e.data),e.getData&&(this._getData=e.getData),void 0!==e.minResubscribeDelay&&(this._minResubscribeDelay=e.minResubscribeDelay),void 0!==e.maxResubscribeDelay&&(this._maxResubscribeDelay=e.maxResubscribeDelay),e.token&&(this._token=e.token),e.getToken&&(this._getToken=e.getToken),!0===e.positioned&&(this._positioned=!0),!0===e.recoverable&&(this._recoverable=!0),!0===e.joinLeave&&(this._joinLeave=!0),e.delta)){if("fossil"!==e.delta)throw Error("unsupported delta format");this._delta=e.delta}}_getOffset(){let e=this._offset;return null!==e?e:0}_getEpoch(){let e=this._epoch;return null!==e?e:""}_clearRefreshTimeout(){null!==this._refreshTimeout&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null)}_clearResubscribeTimeout(){null!==this._resubscribeTimeout&&(clearTimeout(this._resubscribeTimeout),this._resubscribeTimeout=null)}_getSubscriptionToken(){this._debug("get subscription token for channel",this.channel);let e={channel:this.channel},t=this._getToken;return null===t?(this.emit("error",{type:"configuration",channel:this.channel,error:{code:f.badConfiguration,message:"provide a function to get channel subscription token"}}),Promise.reject(new K(""))):t(e)}_refresh(){this._clearRefreshTimeout();let e=this;this._getSubscriptionToken().then(function(t){if(!e._isSubscribed())return;if(!t){e._failUnauthorized();return}e._token=t;let n={channel:e.channel,token:t};e._centrifuge._call({sub_refresh:n}).then(t=>{let n=t.reply.sub_refresh;e._refreshResponse(n),t.next&&t.next()},t=>{e._refreshError(t.error),t.next&&t.next()})}).catch(function(t){if(t instanceof K){e._failUnauthorized();return}e.emit("error",{type:"refreshToken",channel:e.channel,error:{code:f.subscriptionRefreshToken,message:void 0!==t?t.toString():""}}),e._refreshTimeout=setTimeout(()=>e._refresh(),e._getRefreshRetryDelay())})}_refreshResponse(e){this._isSubscribed()&&(this._debug("subscription token refreshed, channel",this.channel),this._clearRefreshTimeout(),!0===e.expires&&(this._refreshTimeout=setTimeout(()=>this._refresh(),N(e.ttl))))}_refreshError(e){this._isSubscribed()&&(e.code<100||!0===e.temporary?(this.emit("error",{type:"refresh",channel:this.channel,error:e}),this._refreshTimeout=setTimeout(()=>this._refresh(),this._getRefreshRetryDelay())):this._setUnsubscribed(e.code,e.message,!0))}_getRefreshRetryDelay(){return $(0,1e4,2e4)}_failUnauthorized(){this._setUnsubscribed(b.unauthorized,"unauthorized",!0)}}class F{constructor(e,t){this.endpoint=e,this.options=t,this._transport=null}name(){return"sockjs"}subName(){return"sockjs-"+this._transport.transport}emulation(){return!1}supported(){return null!==this.options.sockjs}initialize(e,t){this._transport=new this.options.sockjs(this.endpoint,null,this.options.sockjsOptions),this._transport.onopen=()=>{t.onOpen()},this._transport.onerror=e=>{t.onError(e)},this._transport.onclose=e=>{t.onClose(e)},this._transport.onmessage=e=>{t.onMessage(e.data)}}close(){this._transport.close()}send(e){this._transport.send(e)}}class U{constructor(e,t){this.endpoint=e,this.options=t,this._transport=null}name(){return"websocket"}subName(){return"websocket"}emulation(){return!1}supported(){return void 0!==this.options.websocket&&null!==this.options.websocket}initialize(e,t){let n="";"protobuf"===e&&(n="centrifuge-protobuf"),""!==n?this._transport=new this.options.websocket(this.endpoint,n):this._transport=new this.options.websocket(this.endpoint),"protobuf"===e&&(this._transport.binaryType="arraybuffer"),this._transport.onopen=()=>{t.onOpen()},this._transport.onerror=e=>{t.onError(e)},this._transport.onclose=e=>{t.onClose(e)},this._transport.onmessage=e=>{t.onMessage(e.data)}}close(){this._transport.close()}send(e){this._transport.send(e)}}class Z{constructor(e,t){this.endpoint=e,this.options=t,this._abortController=null,this._utf8decoder=new TextDecoder,this._protocol="json"}name(){return"http_stream"}subName(){return"http_stream"}emulation(){return!0}_handleErrors(e){if(!e.ok)throw Error(e.status);return e}_fetchEventTarget(e,t,n){let r=new EventTarget;return(0,e.options.fetch)(t,n).then(e._handleErrors).then(t=>{r.dispatchEvent(new Event("open"));let n="",i=0,s=new Uint8Array,o=t.body.getReader();return new e.options.readableStream({start:t=>(function a(){return o.read().then(({done:o,value:u})=>{if(o){r.dispatchEvent(new Event("close")),t.close();return}try{if("json"===e._protocol)for(n+=e._utf8decoder.decode(u);i<n.length;)if("\n"===n[i]){let e=n.substring(0,i);r.dispatchEvent(new MessageEvent("message",{data:e})),n=n.substring(i+1),i=0}else++i;else{let t=new Uint8Array(s.length+u.length);for(t.set(s),t.set(u,s.length),s=t;;){let t=e.options.decoder.decodeReply(s);if(t.ok){let e=s.slice(0,t.pos);r.dispatchEvent(new MessageEvent("message",{data:e})),s=s.slice(t.pos);continue}break}}}catch(e){r.dispatchEvent(new Event("error",{detail:e})),r.dispatchEvent(new Event("close")),t.close();return}a()}).catch(function(e){r.dispatchEvent(new Event("error",{detail:e})),r.dispatchEvent(new Event("close")),t.close()})})()})}).catch(e=>{r.dispatchEvent(new Event("error",{detail:e})),r.dispatchEvent(new Event("close"))}),r}supported(){return null!==this.options.fetch&&null!==this.options.readableStream&&"undefined"!=typeof TextDecoder&&"undefined"!=typeof AbortController&&"undefined"!=typeof EventTarget&&"undefined"!=typeof Event&&"undefined"!=typeof MessageEvent&&"undefined"!=typeof Error}initialize(e,t,n){this._protocol=e,this._abortController=new AbortController;let r={method:"POST",headers:"json"===e?{Accept:"application/json","Content-Type":"application/json"}:{Accept:"application/octet-stream","Content-Type":"application/octet-stream"},body:n,mode:"cors",credentials:"same-origin",signal:this._abortController.signal},i=this._fetchEventTarget(this,this.endpoint,r);i.addEventListener("open",()=>{t.onOpen()}),i.addEventListener("error",e=>{this._abortController.abort(),t.onError(e)}),i.addEventListener("close",()=>{this._abortController.abort(),t.onClose({code:4,reason:"connection closed"})}),i.addEventListener("message",e=>{t.onMessage(e.data)})}close(){this._abortController.abort()}send(e,t,n){let r,i;let s={session:t,node:n,data:e};"json"===this._protocol?(r={"Content-Type":"application/json"},i=JSON.stringify(s)):(r={"Content-Type":"application/octet-stream"},i=this.options.encoder.encodeEmulationRequest(s));let o=this.options.fetch,a={method:"POST",headers:r,body:i,mode:"cors",credentials:"same-origin"};o(this.options.emulationEndpoint,a)}}class z{constructor(e,t){this.endpoint=e,this.options=t,this._protocol="json",this._transport=null,this._onClose=null}name(){return"sse"}subName(){return"sse"}emulation(){return!0}supported(){return null!==this.options.eventsource&&null!==this.options.fetch}initialize(e,t,n){let r;(r=globalThis&&globalThis.document&&globalThis.document.baseURI?new URL(this.endpoint,globalThis.document.baseURI):new URL(this.endpoint)).searchParams.append("cf_connect",n);let i=new this.options.eventsource(r.toString(),{});this._transport=i,i.onopen=function(){t.onOpen()},i.onerror=function(e){i.close(),t.onError(e),t.onClose({code:4,reason:"connection closed"})},i.onmessage=function(e){t.onMessage(e.data)},this._onClose=function(){t.onClose({code:4,reason:"connection closed"})}}close(){this._transport.close(),null!==this._onClose&&this._onClose()}send(e,t,n){let r=JSON.stringify({session:t,node:n,data:e});(0,this.options.fetch)(this.options.emulationEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:r,mode:"cors",credentials:"same-origin"})}}class B{constructor(e,t){this.endpoint=e,this.options=t,this._transport=null,this._stream=null,this._writer=null,this._utf8decoder=new TextDecoder,this._protocol="json"}name(){return"webtransport"}subName(){return"webtransport"}emulation(){return!1}supported(){return void 0!==this.options.webtransport&&null!==this.options.webtransport}initialize(e,t){return r(this,void 0,void 0,function*(){let n,r;n=globalThis&&globalThis.document&&globalThis.document.baseURI?new URL(this.endpoint,globalThis.document.baseURI):new URL(this.endpoint),"protobuf"===e&&n.searchParams.append("cf_protocol","protobuf"),this._protocol=e;let i=new EventTarget;this._transport=new this.options.webtransport(n.toString()),this._transport.closed.then(()=>{t.onClose({code:4,reason:"connection closed"})}).catch(()=>{t.onClose({code:4,reason:"connection closed"})});try{yield this._transport.ready}catch(e){this.close();return}try{r=yield this._transport.createBidirectionalStream()}catch(e){this.close();return}this._stream=r,this._writer=this._stream.writable.getWriter(),i.addEventListener("close",()=>{t.onClose({code:4,reason:"connection closed"})}),i.addEventListener("message",e=>{t.onMessage(e.data)}),this._startReading(i),t.onOpen()})}_startReading(e){return r(this,void 0,void 0,function*(){let t=this._stream.readable.getReader(),n="",r=0,i=new Uint8Array;try{for(;;){let{done:s,value:o}=yield t.read();if(o.length>0){if("json"===this._protocol)for(n+=this._utf8decoder.decode(o);r<n.length;)if("\n"===n[r]){let t=n.substring(0,r);e.dispatchEvent(new MessageEvent("message",{data:t})),n=n.substring(r+1),r=0}else++r;else{let t=new Uint8Array(i.length+o.length);for(t.set(i),t.set(o,i.length),i=t;;){let t=this.options.decoder.decodeReply(i);if(t.ok){let n=i.slice(0,t.pos);e.dispatchEvent(new MessageEvent("message",{data:n})),i=i.slice(t.pos);continue}break}}}if(s)break}}catch(t){e.dispatchEvent(new Event("close"))}})}close(){return r(this,void 0,void 0,function*(){try{this._writer&&(yield this._writer.close()),this._transport.close()}catch(e){}})}send(e){return r(this,void 0,void 0,function*(){let t;t="json"===this._protocol?new TextEncoder().encode(e+"\n"):e;try{yield this._writer.write(t)}catch(e){this.close()}})}}let H=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,36,-1,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,-1,-1,-1,63,-1];class V{constructor(e){this.a=e,this.pos=0}haveBytes(){return this.pos<this.a.length}getByte(){let e=this.a[this.pos];if(this.pos++,this.pos>this.a.length)throw RangeError("out of bounds");return e}getChar(){return String.fromCharCode(this.getByte())}getInt(){let e,t=0;for(;this.haveBytes()&&(e=H[127&this.getByte()])>=0;)t=(t<<6)+e;return this.pos--,t>>>0}}class Q{constructor(){this.a=[]}toByteArray(e){return Array.isArray(e)?this.a:new Uint8Array(this.a)}putArray(e,t,n){for(let r=t;r<n;r++)this.a.push(e[r])}}class W{name(){return"json"}encodeCommands(e){return e.map(e=>JSON.stringify(e)).join("\n")}decodeReplies(e){return e.trim().split("\n").map(e=>JSON.parse(e))}applyDeltaIfNeeded(e,t){let n,r;if(e.delta){let i=function(e,t){let n=0,r=new V(t),i=e.length,s=t.length,o=r.getInt();if("\n"!==r.getChar())throw Error("size integer not terminated by '\\n'");let a=new Q;for(;r.haveBytes();){let t;let u=r.getInt();switch(r.getChar()){case"@":if(t=r.getInt(),r.haveBytes()&&","!==r.getChar())throw Error("copy command not terminated by ','");if((n+=u)>o)throw Error("copy exceeds output file size");if(t+u>i)throw Error("copy extends past end of input");a.putArray(e,t,t+u);break;case":":if((n+=u)>o)throw Error("insert command gives an output larger than predicted");if(u>s)throw Error("insert count exceeds size of delta");a.putArray(r.a,r.pos,r.pos+u),r.pos+=u;break;case";":{let t=a.toByteArray(e);if(u!==function(e){let t=0,n=0,r=0,i=0,s=0,o=e.length;for(;o>=16;)t=t+e[s+0]|0,n=n+e[s+1]|0,r=r+e[s+2]|0,i=i+e[s+3]|0,t=t+e[s+4]|0,n=n+e[s+5]|0,r=r+e[s+6]|0,i=i+e[s+7]|0,t=t+e[s+8]|0,n=n+e[s+9]|0,r=r+e[s+10]|0,i=i+e[s+11]|0,t=t+e[s+12]|0,n=n+e[s+13]|0,r=r+e[s+14]|0,i=i+e[s+15]|0,s+=16,o-=16;for(;o>=4;)t=t+e[s+0]|0,n=n+e[s+1]|0,r=r+e[s+2]|0,i=i+e[s+3]|0,s+=4,o-=4;switch(i=((i+(r<<8)|0)+(n<<16)|0)+(t<<24)|0,o){case 3:i=i+(e[s+2]<<8)|0;case 2:i=i+(e[s+1]<<16)|0;case 1:i=i+(e[s+0]<<24)|0}return i>>>0}(t))throw Error("bad checksum");if(n!==o)throw Error("generated size does not match predicted size");return t}default:throw Error("unknown delta operator")}}throw Error("unterminated delta")}(t,new TextEncoder().encode(e.data));n=JSON.parse(new TextDecoder().decode(i)),r=i}else n=JSON.parse(e.data),r=new TextEncoder().encode(e.data);return{newData:n,newPrevValue:r}}}let Y={headers:{},token:"",getToken:null,data:null,getData:null,debug:!1,name:"js",version:"",fetch:null,readableStream:null,websocket:null,eventsource:null,sockjs:null,sockjsOptions:{},emulationEndpoint:"/emulation",minReconnectDelay:500,maxReconnectDelay:2e4,timeout:5e3,maxServerPingDelay:1e4,networkEventTarget:null};class K extends Error{constructor(e){super(e),this.name=this.constructor.name}}class J extends L{constructor(e,t){super(),this._reconnectTimeout=null,this._refreshTimeout=null,this._serverPingTimeout=null,this.state=g.Disconnected,this._transportIsOpen=!1,this._endpoint=e,this._emulation=!1,this._transports=[],this._currentTransportIndex=0,this._triedAllTransports=!1,this._transportWasOpen=!1,this._transport=null,this._transportId=0,this._deviceWentOffline=!1,this._transportClosed=!0,this._codec=new W,this._reconnecting=!1,this._reconnectTimeout=null,this._reconnectAttempts=0,this._client=null,this._session="",this._node="",this._subs={},this._serverSubs={},this._commandId=0,this._commands=[],this._batching=!1,this._refreshRequired=!1,this._refreshTimeout=null,this._callbacks={},this._token="",this._data=null,this._dispatchPromise=Promise.resolve(),this._serverPing=0,this._serverPingTimeout=null,this._sendPong=!1,this._promises={},this._promiseId=0,this._debugEnabled=!1,this._networkEventsSet=!1,this._config=Object.assign(Object.assign({},Y),t),this._configure(),this._debugEnabled?(this.on("state",e=>{this._debug("client state",e.oldState,"->",e.newState)}),this.on("error",e=>{this._debug("client error",e)})):this.on("error",function(){Function.prototype()})}newSubscription(e,t){if(null!==this.getSubscription(e))throw Error("Subscription to the channel "+e+" already exists");let n=new q(this,e,t);return this._subs[e]=n,n}getSubscription(e){return this._getSub(e)}removeSubscription(e){e&&(e.state!==v.Unsubscribed&&e.unsubscribe(),this._removeSubscription(e))}subscriptions(){return this._subs}ready(e){switch(this.state){case g.Disconnected:return Promise.reject({code:f.clientDisconnected,message:"client disconnected"});case g.Connected:return Promise.resolve();default:return new Promise((t,n)=>{let r={resolve:t,reject:n};e&&(r.timeout=setTimeout(()=>{n({code:f.timeout,message:"timeout"})},e)),this._promises[this._nextPromiseId()]=r})}}connect(){if(this._isConnected()){this._debug("connect called when already connected");return}if(this._isConnecting()){this._debug("connect called when already connecting");return}this._debug("connect called"),this._reconnectAttempts=0,this._startConnecting()}disconnect(){this._disconnect(_.disconnectCalled,"disconnect called",!1)}setToken(e){this._token=e}setHeaders(e){this._config.headers=e}send(e){return r(this,void 0,void 0,function*(){if(yield this._methodCall(),!this._transportSendCommands([{send:{data:e}}]))throw this._createErrorObject(f.transportWriteError,"transport write error")})}rpc(e,t){return r(this,void 0,void 0,function*(){return yield this._methodCall(),{data:(yield this._callPromise({rpc:{method:e,data:t}},e=>e.rpc)).data}})}publish(e,t){return r(this,void 0,void 0,function*(){return yield this._methodCall(),yield this._callPromise({publish:{channel:e,data:t}},()=>({})),{}})}history(e,t){return r(this,void 0,void 0,function*(){let n={history:this._getHistoryRequest(e,t)};yield this._methodCall();let r=yield this._callPromise(n,e=>e.history),i=[];if(r.publications)for(let t=0;t<r.publications.length;t++)i.push(this._getPublicationContext(e,r.publications[t]));return{publications:i,epoch:r.epoch||"",offset:r.offset||0}})}presence(e){return r(this,void 0,void 0,function*(){yield this._methodCall();let t=(yield this._callPromise({presence:{channel:e}},e=>e.presence)).presence;for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e)){let n=t[e],r=n.conn_info,i=n.chan_info;r&&(n.connInfo=r),i&&(n.chanInfo=i)}return{clients:t}})}presenceStats(e){return r(this,void 0,void 0,function*(){yield this._methodCall();let t=yield this._callPromise({presence_stats:{channel:e}},e=>e.presence_stats);return{numUsers:t.num_users,numClients:t.num_clients}})}startBatching(){this._batching=!0}stopBatching(){let e=this;Promise.resolve().then(function(){Promise.resolve().then(function(){e._batching=!1,e._flush()})})}_debug(...e){this._debugEnabled&&function(e,t){if(globalThis.console){let n=globalThis.console[e];A(n)&&n.apply(globalThis.console,t)}}("debug",e)}_codecName(){return this._codec.name()}_formatOverride(){}_configure(){if(!("Promise"in globalThis))throw Error("Promise polyfill required");if(!this._endpoint)throw Error("endpoint configuration required");if(null!==this._config.token&&(this._token=this._config.token),null!==this._config.data&&(this._data=this._config.data),this._codec=new W,this._formatOverride(),(!0===this._config.debug||"undefined"!=typeof localStorage&&localStorage.getItem("centrifuge.debug"))&&(this._debugEnabled=!0),this._debug("config",this._config),"string"==typeof this._endpoint);else if("object"==typeof this._endpoint&&this._endpoint instanceof Array){for(let e in this._transports=this._endpoint,this._emulation=!0,this._transports)if(this._transports.hasOwnProperty(e)){let t=this._transports[e];if(!t.endpoint||!t.transport)throw Error("malformed transport configuration");let n=t.transport;if(0>["websocket","http_stream","sse","sockjs","webtransport"].indexOf(n))throw Error("unsupported transport name: "+n)}}else throw Error("unsupported url configuration type: only string or array of objects are supported")}_setState(e){if(this.state!==e){this._reconnecting=!1;let t=this.state;return this.state=e,this.emit("state",{newState:e,oldState:t}),!0}return!1}_isDisconnected(){return this.state===g.Disconnected}_isConnecting(){return this.state===g.Connecting}_isConnected(){return this.state===g.Connected}_nextCommandId(){return++this._commandId}_setNetworkEvents(){if(this._networkEventsSet)return;let e=null;null!==this._config.networkEventTarget?e=this._config.networkEventTarget:void 0!==globalThis.addEventListener&&(e=globalThis),e&&(e.addEventListener("offline",()=>{this._debug("offline event triggered"),(this.state===g.Connected||this.state===g.Connecting)&&(this._disconnect(p.transportClosed,"transport closed",!0),this._deviceWentOffline=!0)}),e.addEventListener("online",()=>{this._debug("online event triggered"),this.state===g.Connecting&&(this._deviceWentOffline&&!this._transportClosed&&(this._deviceWentOffline=!1,this._transportClosed=!0),this._clearReconnectTimeout(),this._startReconnecting())}),this._networkEventsSet=!0)}_getReconnectDelay(){let e=$(this._reconnectAttempts,this._config.minReconnectDelay,this._config.maxReconnectDelay);return this._reconnectAttempts+=1,e}_clearOutgoingRequests(){for(let e in this._callbacks)if(this._callbacks.hasOwnProperty(e)){let t=this._callbacks[e];clearTimeout(t.timeout);let n=t.errback;if(!n)continue;n({error:this._createErrorObject(f.connectionClosed,"connection closed")})}this._callbacks={}}_clearConnectedState(){for(let e in this._client=null,this._clearServerPingTimeout(),this._clearRefreshTimeout(),this._subs){if(!this._subs.hasOwnProperty(e))continue;let t=this._subs[e];t.state===v.Subscribed&&t._setSubscribing(m.transportClosed,"transport closed")}for(let e in this._serverSubs)this._serverSubs.hasOwnProperty(e)&&this.emit("subscribing",{channel:e})}_handleWriteError(e){for(let t of e){let e=t.id;if(!(e in this._callbacks))continue;let n=this._callbacks[e];clearTimeout(this._callbacks[e].timeout),delete this._callbacks[e],(0,n.errback)({error:this._createErrorObject(f.transportWriteError,"transport write error")})}}_transportSendCommands(e){if(!e.length)return!0;if(!this._transport)return!1;try{this._transport.send(this._codec.encodeCommands(e),this._session,this._node)}catch(t){return this._debug("error writing commands",t),this._handleWriteError(e),!1}return!0}_initializeTransport(){let e,t;null!==this._config.websocket?e=this._config.websocket:"function"!=typeof globalThis.WebSocket&&"object"!=typeof globalThis.WebSocket||(e=globalThis.WebSocket);let n=null;null!==this._config.sockjs?n=this._config.sockjs:void 0!==globalThis.SockJS&&(n=globalThis.SockJS);let r=null;null!==this._config.eventsource?r=this._config.eventsource:void 0!==globalThis.EventSource&&(r=globalThis.EventSource);let i=null;null!==this._config.fetch?i=this._config.fetch:void 0!==globalThis.fetch&&(i=globalThis.fetch);let s=null;if(null!==this._config.readableStream?s=this._config.readableStream:void 0!==globalThis.ReadableStream&&(s=globalThis.ReadableStream),this._emulation){this._currentTransportIndex>=this._transports.length&&(this._triedAllTransports=!0,this._currentTransportIndex=0);let t=0;for(;;){if(t>=this._transports.length)throw Error("no supported transport found");let o=this._transports[this._currentTransportIndex],a=o.transport,u=o.endpoint;if("websocket"===a){if(this._debug("trying websocket transport"),this._transport=new U(u,{websocket:e}),!this._transport.supported()){this._debug("websocket transport not available"),this._currentTransportIndex++,t++;continue}}else if("webtransport"===a){if(this._debug("trying webtransport transport"),this._transport=new B(u,{webtransport:globalThis.WebTransport,decoder:this._codec,encoder:this._codec}),!this._transport.supported()){this._debug("webtransport transport not available"),this._currentTransportIndex++,t++;continue}}else if("http_stream"===a){if(this._debug("trying http_stream transport"),this._transport=new Z(u,{fetch:i,readableStream:s,emulationEndpoint:this._config.emulationEndpoint,decoder:this._codec,encoder:this._codec}),!this._transport.supported()){this._debug("http_stream transport not available"),this._currentTransportIndex++,t++;continue}}else if("sse"===a){if(this._debug("trying sse transport"),this._transport=new z(u,{eventsource:r,fetch:i,emulationEndpoint:this._config.emulationEndpoint}),!this._transport.supported()){this._debug("sse transport not available"),this._currentTransportIndex++,t++;continue}}else if("sockjs"===a){if(this._debug("trying sockjs"),this._transport=new F(u,{sockjs:n,sockjsOptions:this._config.sockjsOptions}),!this._transport.supported()){this._debug("sockjs transport not available"),this._currentTransportIndex++,t++;continue}}else throw Error("unknown transport "+a);break}}else{var o,a;if(o=this._endpoint,a="http",0===o.lastIndexOf(a,0))throw Error("Provide explicit transport endpoints configuration in case of using HTTP (i.e. using array of TransportEndpoint instead of a single string), or use ws(s):// scheme in an endpoint if you aimed using WebSocket transport");if(this._debug("client will use websocket"),this._transport=new U(this._endpoint,{websocket:e}),!this._transport.supported())throw Error("WebSocket constructor not found, make sure it is available globally or passed as a dependency in Centrifuge options")}let u=this,c=this._transport,l=this._nextTransportId();u._debug("id of transport",l);let h=!1,d=[];if(this._transport.emulation()){let e=u._sendConnect(!0);d.push(e)}this._setNetworkEvents();let m=this._codec.encodeCommands(d);this._transportClosed=!1,t=setTimeout(function(){c.close()},this._config.timeout),this._transport.initialize(this._codecName(),{onOpen:function(){if(t&&(clearTimeout(t),t=null),u._transportId!=l){u._debug("open callback from non-actual transport"),c.close();return}h=!0,u._debug(c.subName(),"transport open"),c.emulation()||(u._transportIsOpen=!0,u._transportWasOpen=!0,u.startBatching(),u._sendConnect(!1),u._sendSubscribeCommands(),u.stopBatching(),u.emit("__centrifuge_debug:connect_frame_sent",{}))},onError:function(e){if(u._transportId!=l){u._debug("error callback from non-actual transport");return}u._debug("transport level error",e)},onClose:function(e){if(t&&(clearTimeout(t),t=null),u._transportId!=l){u._debug("close callback from non-actual transport");return}u._debug(c.subName(),"transport closed"),u._transportClosed=!0,u._transportIsOpen=!1;let n="connection closed",r=!0,i=0;if(e&&"code"in e&&e.code&&(i=e.code),e&&e.reason)try{let t=JSON.parse(e.reason);n=t.reason,r=t.reconnect}catch(t){n=e.reason,(i>=3500&&i<4e3||i>=4500&&i<5e3)&&(r=!1)}i<3e3?(1009===i?(i=_.messageSizeLimit,n="message size limit exceeded",r=!1):(i=p.transportClosed,n="transport closed"),u._emulation&&!u._transportWasOpen&&(u._currentTransportIndex++,u._currentTransportIndex>=u._transports.length&&(u._triedAllTransports=!0,u._currentTransportIndex=0))):u._transportWasOpen=!0,u._isConnecting()&&!h&&u.emit("error",{type:"transport",error:{code:f.transportClosed,message:"transport closed"},transport:c.name()}),u._reconnecting=!1,u._disconnect(i,n,r)},onMessage:function(e){u._dataReceived(e)}},m),u.emit("__centrifuge_debug:transport_initialized",{})}_sendConnect(e){let t=this._constructConnectCommand(),n=this;return this._call(t,e).then(e=>{let t=e.reply.connect;n._connectResponse(t),e.next&&e.next()},e=>{n._connectError(e.error),e.next&&e.next()}),t}_startReconnecting(){if(this._debug("start reconnecting"),!this._isConnecting()){this._debug("stop reconnecting: client not in connecting state");return}if(this._reconnecting){this._debug("reconnect already in progress, return from reconnect routine");return}if(!1===this._transportClosed){this._debug("waiting for transport close");return}this._reconnecting=!0;let e=""===this._token;if(!(this._refreshRequired||e&&null!==this._config.getToken)){this._config.getData?this._config.getData().then(e=>{this._isConnecting()&&(this._data=e,this._initializeTransport())}).catch(e=>this._handleGetDataError(e)):this._initializeTransport();return}let t=this;this._getToken().then(function(e){if(t._isConnecting()){if(null==e||void 0==e){t._failUnauthorized();return}t._token=e,t._debug("connection token refreshed"),t._config.getData?t._config.getData().then(function(e){t._isConnecting()&&(t._data=e,t._initializeTransport())}).catch(e=>t._handleGetDataError(e)):t._initializeTransport()}}).catch(function(e){if(!t._isConnecting())return;if(e instanceof K){t._failUnauthorized();return}t.emit("error",{type:"connectToken",error:{code:f.clientConnectToken,message:void 0!==e?e.toString():""}});let n=t._getReconnectDelay();t._debug("error on getting connection token, reconnect after "+n+" milliseconds",e),t._reconnecting=!1,t._reconnectTimeout=setTimeout(()=>{t._startReconnecting()},n)})}_handleGetDataError(e){if(e instanceof K){this._failUnauthorized();return}this.emit("error",{type:"connectData",error:{code:f.badConfiguration,message:(null==e?void 0:e.toString())||""}});let t=this._getReconnectDelay();this._debug("error on getting connect data, reconnect after "+t+" milliseconds",e),this._reconnecting=!1,this._reconnectTimeout=setTimeout(()=>{this._startReconnecting()},t)}_connectError(e){this.state===g.Connecting&&(109===e.code&&(this._refreshRequired=!0),e.code<100||!0===e.temporary||109===e.code?(this.emit("error",{type:"connect",error:e}),this._debug("closing transport due to connect error"),this._disconnect(e.code,e.message,!0)):this._disconnect(e.code,e.message,!1))}_scheduleReconnect(){if(!this._isConnecting())return;let e=!1;!this._emulation||this._transportWasOpen||this._triedAllTransports||(e=!0);let t=this._getReconnectDelay();e&&(t=0),this._debug("reconnect after "+t+" milliseconds"),this._clearReconnectTimeout(),this._reconnectTimeout=setTimeout(()=>{this._startReconnecting()},t)}_constructConnectCommand(){let e={};this._token&&(e.token=this._token),this._data&&(e.data=this._data),this._config.name&&(e.name=this._config.name),this._config.version&&(e.version=this._config.version),Object.keys(this._config.headers).length>0&&(e.headers=this._config.headers);let t={},n=!1;for(let e in this._serverSubs)if(this._serverSubs.hasOwnProperty(e)&&this._serverSubs[e].recoverable){n=!0;let r={recover:!0};this._serverSubs[e].offset&&(r.offset=this._serverSubs[e].offset),this._serverSubs[e].epoch&&(r.epoch=this._serverSubs[e].epoch),t[e]=r}return n&&(e.subs=t),{connect:e}}_getHistoryRequest(e,t){let n={channel:e};return void 0!==t&&(t.since&&(n.since={offset:t.since.offset},t.since.epoch&&(n.since.epoch=t.since.epoch)),void 0!==t.limit&&(n.limit=t.limit),!0===t.reverse&&(n.reverse=!0)),n}_methodCall(){return this._isConnected()?Promise.resolve():new Promise((e,t)=>{let n=setTimeout(function(){t({code:f.timeout,message:"timeout"})},this._config.timeout);this._promises[this._nextPromiseId()]={timeout:n,resolve:e,reject:t}})}_callPromise(e,t){return new Promise((n,r)=>{this._call(e,!1).then(e=>{var r;n(t(e.reply)),null===(r=e.next)||void 0===r||r.call(e)},e=>{var t;r(e.error),null===(t=e.next)||void 0===t||t.call(e)})})}_dataReceived(e){this._serverPing>0&&this._waitServerPing();let t=this._codec.decodeReplies(e);this._dispatchPromise=this._dispatchPromise.then(()=>{let e;this._dispatchPromise=new Promise(t=>{e=t}),this._dispatchSynchronized(t,e)})}_dispatchSynchronized(e,t){let n=Promise.resolve();for(let t in e)e.hasOwnProperty(t)&&(n=n.then(()=>this._dispatchReply(e[t])));n.then(()=>{t()})}_dispatchReply(e){let t;let n=new Promise(e=>{t=e});if(null==e)return this._debug("dispatch: got undefined or null reply"),t(),n;let r=e.id;return r&&r>0?this._handleReply(e,t):e.push?this._handlePush(e.push,t):this._handleServerPing(t),n}_call(e,t){return new Promise((n,r)=>{e.id=this._nextCommandId(),this._registerCall(e.id,n,r),t||this._addCommand(e)})}_startConnecting(){this._debug("start connecting"),this._setState(g.Connecting)&&this.emit("connecting",{code:p.connectCalled,reason:"connect called"}),this._client=null,this._startReconnecting()}_disconnect(e,t,n){if(this._isDisconnected())return;this._transportIsOpen=!1;let r=this.state;this._reconnecting=!1;let i={code:e,reason:t},s=!1;if(n?s=this._setState(g.Connecting):(s=this._setState(g.Disconnected),this._rejectPromises({code:f.clientDisconnected,message:"disconnected"})),this._clearOutgoingRequests(),r===g.Connecting&&this._clearReconnectTimeout(),r===g.Connected&&this._clearConnectedState(),s&&(this._isConnecting()?this.emit("connecting",i):this.emit("disconnected",i)),this._transport){this._debug("closing existing transport");let e=this._transport;this._transport=null,e.close(),this._transportClosed=!0,this._nextTransportId()}else this._debug("no transport to close");this._scheduleReconnect()}_failUnauthorized(){this._disconnect(_.unauthorized,"unauthorized",!1)}_getToken(){return(this._debug("get connection token"),this._config.getToken)?this._config.getToken({}):(this.emit("error",{type:"configuration",error:{code:f.badConfiguration,message:"token expired but no getToken function set in the configuration"}}),Promise.reject(new K("")))}_refresh(){let e=this._client,t=this;this._getToken().then(function(n){if(e!==t._client)return;if(!n){t._failUnauthorized();return}if(t._token=n,t._debug("connection token refreshed"),!t._isConnected())return;let r={refresh:{token:t._token}};t._call(r,!1).then(e=>{let n=e.reply.refresh;t._refreshResponse(n),e.next&&e.next()},e=>{t._refreshError(e.error),e.next&&e.next()})}).catch(function(e){if(t._isConnected()){if(e instanceof K){t._failUnauthorized();return}t.emit("error",{type:"refreshToken",error:{code:f.clientRefreshToken,message:void 0!==e?e.toString():""}}),t._refreshTimeout=setTimeout(()=>t._refresh(),t._getRefreshRetryDelay())}})}_refreshError(e){e.code<100||!0===e.temporary?(this.emit("error",{type:"refresh",error:e}),this._refreshTimeout=setTimeout(()=>this._refresh(),this._getRefreshRetryDelay())):this._disconnect(e.code,e.message,!1)}_getRefreshRetryDelay(){return $(0,5e3,1e4)}_refreshResponse(e){this._refreshTimeout&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null),e.expires&&(this._client=e.client,this._refreshTimeout=setTimeout(()=>this._refresh(),N(e.ttl)))}_removeSubscription(e){null!==e&&delete this._subs[e.channel]}_unsubscribe(e){if(!this._transportIsOpen)return Promise.resolve();let t={unsubscribe:{channel:e.channel}},n=this;return new Promise((e,r)=>{this._call(t,!1).then(t=>{e(),t.next&&t.next()},t=>{e(),t.next&&t.next(),n._disconnect(p.unsubscribeError,"unsubscribe error",!0)})})}_getSub(e){return this._subs[e]||null}_isServerSub(e){return void 0!==this._serverSubs[e]}_sendSubscribeCommands(){let e=[];for(let t in this._subs){if(!this._subs.hasOwnProperty(t))continue;let n=this._subs[t];if(!0!==n._inflight&&n.state===v.Subscribing){let t=n._subscribe();t&&e.push(t)}}return e}_connectResponse(e){if(this._transportIsOpen=!0,this._transportWasOpen=!0,this._reconnectAttempts=0,this._refreshRequired=!1,this._isConnected())return;this._client=e.client,this._setState(g.Connected),this._refreshTimeout&&clearTimeout(this._refreshTimeout),e.expires&&(this._refreshTimeout=setTimeout(()=>this._refresh(),N(e.ttl))),this._session=e.session,this._node=e.node,this.startBatching(),this._sendSubscribeCommands(),this.stopBatching();let t={client:e.client,transport:this._transport.subName()};e.data&&(t.data=e.data),this.emit("connected",t),this._resolvePromises(),this._processServerSubs(e.subs||{}),e.ping&&e.ping>0?(this._serverPing=1e3*e.ping,this._sendPong=!0===e.pong,this._waitServerPing()):this._serverPing=0}_processServerSubs(e){for(let t in e){if(!e.hasOwnProperty(t))continue;let n=e[t];this._serverSubs[t]={offset:n.offset,epoch:n.epoch,recoverable:n.recoverable||!1};let r=this._getSubscribeContext(t,n);this.emit("subscribed",r)}for(let t in e){if(!e.hasOwnProperty(t))continue;let n=e[t];if(n.recovered){let e=n.publications;if(e&&e.length>0)for(let n in e)e.hasOwnProperty(n)&&this._handlePublication(t,e[n])}}for(let t in this._serverSubs)this._serverSubs.hasOwnProperty(t)&&(e[t]||(this.emit("unsubscribed",{channel:t}),delete this._serverSubs[t]))}_clearRefreshTimeout(){null!==this._refreshTimeout&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null)}_clearReconnectTimeout(){null!==this._reconnectTimeout&&(clearTimeout(this._reconnectTimeout),this._reconnectTimeout=null)}_clearServerPingTimeout(){null!==this._serverPingTimeout&&(clearTimeout(this._serverPingTimeout),this._serverPingTimeout=null)}_waitServerPing(){0!==this._config.maxServerPingDelay&&this._isConnected()&&(this._clearServerPingTimeout(),this._serverPingTimeout=setTimeout(()=>{this._isConnected()&&this._disconnect(p.noPing,"no ping",!0)},this._serverPing+this._config.maxServerPingDelay))}_getSubscribeContext(e,t){let n={channel:e,positioned:!1,recoverable:!1,wasRecovering:!1,recovered:!1,hasRecoveredPublications:!1};t.recovered&&(n.recovered=!0),t.positioned&&(n.positioned=!0),t.recoverable&&(n.recoverable=!0),t.was_recovering&&(n.wasRecovering=!0);let r="";"epoch"in t&&(r=t.epoch);let i=0;return"offset"in t&&(i=t.offset),(n.positioned||n.recoverable)&&(n.streamPosition={offset:i,epoch:r}),Array.isArray(t.publications)&&t.publications.length>0&&(n.hasRecoveredPublications=!0),t.data&&(n.data=t.data),n}_handleReply(e,t){let n=e.id;if(!(n in this._callbacks)){t();return}let r=this._callbacks[n];if(clearTimeout(this._callbacks[n].timeout),delete this._callbacks[n],"error"in e&&null!==e.error){let n=r.errback;if(!n){t();return}n({error:{code:e.error.code,message:e.error.message||"",temporary:e.error.temporary||!1},next:t})}else{let n=r.callback;if(!n)return;n({reply:e,next:t})}}_handleJoin(e,t){let n=this._getSub(e);if(!n){if(this._isServerSub(e)){let n={channel:e,info:this._getJoinLeaveContext(t.info)};this.emit("join",n)}return}n._handleJoin(t)}_handleLeave(e,t){let n=this._getSub(e);if(!n){if(this._isServerSub(e)){let n={channel:e,info:this._getJoinLeaveContext(t.info)};this.emit("leave",n)}return}n._handleLeave(t)}_handleUnsubscribe(e,t){let n=this._getSub(e);if(!n){this._isServerSub(e)&&(delete this._serverSubs[e],this.emit("unsubscribed",{channel:e}));return}t.code<2500?n._setUnsubscribed(t.code,t.reason,!1):n._setSubscribing(t.code,t.reason)}_handleSubscribe(e,t){this._serverSubs[e]={offset:t.offset,epoch:t.epoch,recoverable:t.recoverable||!1},this.emit("subscribed",this._getSubscribeContext(e,t))}_handleDisconnect(e){let t=e.code,n=!0;(t>=3500&&t<4e3||t>=4500&&t<5e3)&&(n=!1),this._disconnect(t,e.reason,n)}_getPublicationContext(e,t){let n={channel:e,data:t.data};return t.offset&&(n.offset=t.offset),t.info&&(n.info=this._getJoinLeaveContext(t.info)),t.tags&&(n.tags=t.tags),n}_getJoinLeaveContext(e){let t={client:e.client,user:e.user},n=e.conn_info;n&&(t.connInfo=n);let r=e.chan_info;return r&&(t.chanInfo=r),t}_handlePublication(e,t){let n=this._getSub(e);if(!n){if(this._isServerSub(e)){let n=this._getPublicationContext(e,t);this.emit("publication",n),void 0!==t.offset&&(this._serverSubs[e].offset=t.offset)}return}n._handlePublication(t)}_handleMessage(e){this.emit("message",{data:e.data})}_handleServerPing(e){this._sendPong&&this._transportSendCommands([{}]),e()}_handlePush(e,t){let n=e.channel;e.pub?this._handlePublication(n,e.pub):e.message?this._handleMessage(e.message):e.join?this._handleJoin(n,e.join):e.leave?this._handleLeave(n,e.leave):e.unsubscribe?this._handleUnsubscribe(n,e.unsubscribe):e.subscribe?this._handleSubscribe(n,e.subscribe):e.disconnect&&this._handleDisconnect(e.disconnect),t()}_flush(){let e=this._commands.slice(0);this._commands=[],this._transportSendCommands(e)}_createErrorObject(e,t,n){let r={code:e,message:t};return n&&(r.temporary=!0),r}_registerCall(e,t,n){this._callbacks[e]={callback:t,errback:n,timeout:null},this._callbacks[e].timeout=setTimeout(()=>{delete this._callbacks[e],A(n)&&n({error:this._createErrorObject(f.timeout,"timeout")})},this._config.timeout)}_addCommand(e){this._batching?this._commands.push(e):this._transportSendCommands([e])}_nextPromiseId(){return++this._promiseId}_nextTransportId(){return++this._transportId}_resolvePromises(){for(let e in this._promises)this._promises.hasOwnProperty(e)&&(this._promises[e].timeout&&clearTimeout(this._promises[e].timeout),this._promises[e].resolve(),delete this._promises[e])}_rejectPromises(e){for(let t in this._promises)this._promises.hasOwnProperty(t)&&(this._promises[t].timeout&&clearTimeout(this._promises[t].timeout),this._promises[t].reject(e),delete this._promises[t])}}J.SubscriptionState=v,J.State=g,J.UnauthorizedError=K},56931:function(e,t,n){"use strict";n.d(t,{Y:function(){return f}});var r=n(38338),i=n(76543);function s(){(0,r.fF)("[nuqs] Aborting queues"),i.ob.abortAll(),i.KG.abort().forEach(e=>i.ob.queuedQuerySync.emit(e))}var o=n(21956),a=n(57331);let u=0;function c(){u=0,s()}function l(){--u<=0&&(u=0,queueMicrotask(s))}function h(){return(0,o.useEffect)(()=>((function(){var e,t;if(e="next/app","undefined"==typeof history||(history.nuqs?.version&&"0.0.0-inject-version-here"!==history.nuqs.version?(console.error((0,r.vU)(409),history.nuqs.version,"0.0.0-inject-version-here",e),!0):!!history.nuqs?.adapters?.includes(e)))return;let n=history.replaceState,i=history.pushState;history.replaceState=function(e,t,r){return l(),n.call(history,e,t,r)},history.pushState=function(e,t,n){return l(),i.call(history,e,t,n)},t="next/app",history.nuqs=history.nuqs??{version:"0.0.0-inject-version-here",adapters:[]},history.nuqs.adapters.push(t)})(),window.addEventListener("popstate",c),()=>window.removeEventListener("popstate",c)),[]),null}let d=(0,r.Z0)(function(){let e=(0,a.useRouter)(),t=(0,a.useSearchParams)(),[n,i]=(0,o.useOptimistic)(t);return{searchParams:n,updateUrl:(0,o.useCallback)((t,n)=>{(0,o.startTransition)(()=>{n.shallow||i(t);let s=function(e){let{origin:t,pathname:n,hash:i}=location;return t+n+(0,r.R)(e)+i}(t);(0,r.fF)("[nuqs next/app] Updating url: %s",s);let o="push"===n.history?history.pushState:history.replaceState;u=3,o.call(history,null,"",s),n.scroll&&window.scrollTo(0,0),n.shallow||e.replace(s,{scroll:!1})})},[]),rateLimitFactor:3,autoResetQueueOnUpdate:!1}});function f(e){let{children:t,...n}=e;return(0,o.createElement)(d,{...n,children:[(0,o.createElement)(o.Suspense,{key:"nuqs-adapter-suspense-navspy",children:(0,o.createElement)(h)}),t]})}},1496:function(e,t,n){"use strict";n.d(t,{Qc:function(){return h}});var r=n(2494);function i(e){return e instanceof Error&&"ZodError"===e.name&&"issues"in e&&Array.isArray(e.issues)}var s=class extends Error{name;details;constructor(e,t){super(e,t),this.name="ZodValidationError",this.details=function(e){if(e){let t=e.cause;if(i(t))return t.issues}return[]}(t)}toString(){return this.message}};function o(e){return 0!==e.length}function a(e){return e.description??""}var u=/[$_\p{ID_Start}][$\u200c\u200d\p{ID_Continue}]*/u,c="Validation error",l=(e={})=>t=>i(t)?function(e,t={}){let n=e.errors;return new s(o(n)?("messageBuilder"in t?t.messageBuilder:function(e={}){let{issueSeparator:t="; ",unionSeparator:n=", or ",prefixSeparator:i=": ",prefix:s=c,includePath:l=!0,maxIssuesInMessage:h=99}=e;return e=>{var d;return d=e.slice(0,h).map(e=>(function e(t){let{issue:n,issueSeparator:i,unionSeparator:s,includePath:c}=t;if(n.code===r.NL.invalid_union)return n.unionErrors.reduce((t,n)=>{let r=n.issues.map(t=>e({issue:t,issueSeparator:i,unionSeparator:s,includePath:c})).join(i);return t.includes(r)||t.push(r),t},[]).join(s);if(n.code===r.NL.invalid_arguments)return[n.message,...n.argumentsError.issues.map(t=>e({issue:t,issueSeparator:i,unionSeparator:s,includePath:c}))].join(i);if(n.code===r.NL.invalid_return_type)return[n.message,...n.returnTypeError.issues.map(t=>e({issue:t,issueSeparator:i,unionSeparator:s,includePath:c}))].join(i);if(c&&o(n.path)){if(1===n.path.length){let e=n.path[0];if("number"==typeof e)return`${n.message} at index ${e}`}return`${n.message} at "${function(e){if(1===e.length){let t=e[0];return"symbol"==typeof t&&(t=a(t)),t.toString()||'""'}return e.reduce((e,t)=>{if("number"==typeof t)return e+"["+t.toString()+"]";if("symbol"==typeof t&&(t=a(t)),t.includes('"'))return e+'["'+t.replace(/"/g,'\\"')+'"]';if(!u.test(t))return e+'["'+t+'"]';let n=0===e.length?"":".";return e+n+t},"")}(n.path)}"`}return n.message})({issue:e,issueSeparator:t,unionSeparator:n,includePath:l})).join(t),null!==s?d.length>0?[s,d].join(i):s:d.length>0?d:c}}(t))(n):e.message,{cause:e})}(t,e):t instanceof Error?new s(t.message,{cause:t}):new s("Unknown error");function h(e,t={}){return l(t)(e)}},21568:function(e,t,n){"use strict";n.d(t,{ZP:function(){return c}});var r={};n.r(r),n.d(r,{BRAND:function(){return a.cg},DIRTY:function(){return s.RC},EMPTY_PATH:function(){return s.h2},INVALID:function(){return s.UI},NEVER:function(){return a.C4},OK:function(){return s.OK},ParseStatus:function(){return s.Q9},Schema:function(){return a.V_},ZodAny:function(){return a.O8},ZodArray:function(){return a.p5},ZodBigInt:function(){return a.EG},ZodBoolean:function(){return a.pZ},ZodBranded:function(){return a.Gd},ZodCatch:function(){return a.ON},ZodDate:function(){return a.$s},ZodDefault:function(){return a.uE},ZodDiscriminatedUnion:function(){return a.Iy},ZodEffects:function(){return a.Xc},ZodEnum:function(){return a.K7},ZodError:function(){return u.jm},ZodFirstPartyTypeKind:function(){return a.pA},ZodFunction:function(){return a.b_},ZodIntersection:function(){return a.f9},ZodIssueCode:function(){return u.NL},ZodLazy:function(){return a.dT},ZodLiteral:function(){return a.SG},ZodMap:function(){return a.Ym},ZodNaN:function(){return a.Hu},ZodNativeEnum:function(){return a.Zl},ZodNever:function(){return a.$n},ZodNull:function(){return a.pV},ZodNullable:function(){return a.ng},ZodNumber:function(){return a.IV},ZodObject:function(){return a.CQ},ZodOptional:function(){return a.ak},ZodParsedType:function(){return o.$k},ZodPipeline:function(){return a.om},ZodPromise:function(){return a.Wx},ZodReadonly:function(){return a.ur},ZodRecord:function(){return a.KX},ZodSchema:function(){return a.I6},ZodSet:function(){return a.qA},ZodString:function(){return a.$T},ZodSymbol:function(){return a.tX},ZodTransformer:function(){return a.z2},ZodTuple:function(){return a._P},ZodType:function(){return a.DI},ZodUndefined:function(){return a.DY},ZodUnion:function(){return a.jp},ZodUnknown:function(){return a.Dy},ZodVoid:function(){return a.XE},addIssueToContext:function(){return s.KD},any:function(){return a.Yj},array:function(){return a.IX},bigint:function(){return a.Kv},boolean:function(){return a.O7},coerce:function(){return a.oQ},custom:function(){return a.PG},date:function(){return a.hT},datetimeRegex:function(){return a.wU},defaultErrorMap:function(){return i.jY},discriminatedUnion:function(){return a.VK},effect:function(){return a.cE},enum:function(){return a.Km},function:function(){return a.ZI},getErrorMap:function(){return i.Pr},getParsedType:function(){return o.FQ},instanceof:function(){return a.Pp},intersection:function(){return a.jV},isAborted:function(){return s.Hc},isAsync:function(){return s.S9},isDirty:function(){return s.eT},isValid:function(){return s.JY},late:function(){return a.wt},lazy:function(){return a.Vo},literal:function(){return a.i0},makeIssue:function(){return s.Xm},map:function(){return a.UI},nan:function(){return a.qn},nativeEnum:function(){return a.jb},never:function(){return a.Fi},null:function(){return a.lB},nullable:function(){return a.AG},number:function(){return a.Rx},object:function(){return a.Ry},objectUtil:function(){return o.Mg},oboolean:function(){return a.Ts},onumber:function(){return a.vs},optional:function(){return a.jt},ostring:function(){return a.Dk},pipeline:function(){return a.EU},preprocess:function(){return a.dj},promise:function(){return a.MC},quotelessJson:function(){return u.Zh},record:function(){return a.IM},set:function(){return a.t8},setErrorMap:function(){return i.DJ},strictObject:function(){return a.cf},string:function(){return a.Z_},symbol:function(){return a.NA},transformer:function(){return a.l4},tuple:function(){return a.bc},undefined:function(){return a.S1},union:function(){return a.G0},unknown:function(){return a._4},util:function(){return o.D5},void:function(){return a.Hc}});var i=n(55297),s=n(88753),o=n(46983),a=n(69325),u=n(2494),c=r}}]);