/*! For license information please see 1085.2283e7ad.chunk.js.LICENSE.txt */
"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[1085],{84182:(e,t,n)=>{n.d(t,{$E:()=>o,Li:()=>l,QX:()=>r,Vf:()=>a,_v:()=>u,tI:()=>s});var i=n(42976),r=[i.lT.OPEN,i.lT.IN_REVIEW,i.lT.CHANGES_REQUESTED,i.lT.ACCEPTED,i.lT.CANCELLED,i.lT.REJECTED],o=[i.lT.OPEN,i.lT.IN_REVIEW,i.lT.CHANGES_REQUESTED],a=function(e){return!(!e||!o.includes(e))},u=function(e){return e===i.lT.ACCEPTED},l=function(e){return a(e)||u(e)},s=function(e){return e===i.lT.REJECTED||e===i.lT.CANCELLED}},66356:(e,t,n)=>{n.d(t,{c:()=>c});var i=n(54499),r=n(43253),o=n(53303),a=n(55127),u=n.n(a),l=n(96540),s=n(91271);function c(e){var t=e.hasPrefix,n=void 0!==t&&t,a=e.timestamp,c=e.testId,d=e.isShorthand,f=e.isSameYearShorthand,m=e.includeMinutesAgo,v=e.includeTimeOfDay,p=void 0!==v&&v,b=Date.now(),y=(0,i.A)(b,a),h=(0,r.A)(b,a);if(0===h){var E=(0,o.A)(b,a);if(m&&E>0){var g="".concat(E," ").concat(u()("min",E)," ago");return l.createElement(l.Fragment,null,g)}var k=n?"just now":"Just now";return l.createElement(l.Fragment,null,k)}if(h>=1&&h<24){var w=d?"".concat(h,"h ago"):"".concat(h," ").concat(u()("hour",h)," ago");return l.createElement(l.Fragment,null,w)}if(y>=1&&y<7){var S=d?"".concat(y,"d ago"):"".concat(y," ").concat(u()("day",y)," ago");return l.createElement(l.Fragment,null,S)}return(0,s.n9)({timestamp:a,testId:c,isShorthand:d,isSameYearShorthand:f,includeTimeOfDay:p})}},4369:(e,t,n)=>{n.d(t,{z:()=>N});var i,r=n(64467),o=n(5544),a=n(95420),u=n(96540),l=n(52764),s=n(14782),c=n(52290),d=n(86527),f=n(46445),m=n(20036),v=n(36557),p=n(91830);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},b.apply(null,arguments)}const y=function(e){return u.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,viewBox:"0 0 20 16"},e),i||(i=u.createElement("path",{d:"M0 .353v15.294h20V.353zm6.948 9.374L10 12.226l3.052-2.499 4.877 4.73H2.071zm-5.75 3.913V5.02l4.82 3.946zm12.784-4.675 4.82-3.946v8.621zm4.82-7.421v1.933L10 10.682 1.198 3.477V1.544z"})))};var h=n(60603),E={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"subscribersCount"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"isNewsletter"}},{kind:"Field",name:{kind:"Name",value:"isAuthorNewsletter"}}]}}]},g={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SendPostAsEmailsMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendPostAsEmails"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}]}]}}]};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e){var t=e.post,n=e.onClick,i=e.menuStyle,r=(0,h.e)(!1),l=(0,o.A)(r,3),s=l[0],b=l[1],k=l[2],S=(0,p.zF)(),N=function(){k(),n()},O=(0,a.n)(g,{variables:{postId:(null==t?void 0:t.id)||""},onCompleted:function(e){var t=e.sendPostAsEmails;S(t?{message:"Your story has been emailed to subscribers.",toastStyle:"MESSAGE",duration:2e3}:{message:"We couldn't process your request. Try again, or contact our support team.",toastStyle:"ERROR",duration:2e3})},update:function(e,n){var i={id:"Post:".concat(null==t?void 0:t.id),fragment:E,fragmentName:"NewsletterV3EmailToSubscribersMenuItem_post"},r=e.readFragment(i);n.data&&r&&e.writeFragment(w(w({},i),{},{data:w(w({},r),{},{isAuthorNewsletter:n.data.sendPostAsEmails})}))}}),T=(0,o.A)(O,1)[0];return u.createElement(u.Fragment,null,u.createElement(c.a,{display:"inline-block"},"TEXT"===i?u.createElement(v.kZ,{scale:"M"},u.createElement(d.N,{"data-testid":"emailToSubscribersMenuItem",onClick:function(){null!=t&&t.isAuthorNewsletter?(S({message:"You’ve already sent this story to subscribers.",toastStyle:"ERROR",duration:2e3}),n()):b()}},"Email to subscribers")):u.createElement(d.N,{"data-testid":"emailToSubscribersMenuItem",onClick:function(){null!=t&&t.isAuthorNewsletter?(S({message:"You’ve already sent this story to subscribers.",toastStyle:"ERROR",duration:2e3}),n()):b()}},u.createElement(m.u,{icon:u.createElement(y,{"aria-label":"Email to subscribers"}),tooltipText:"Email to subscribers"}))),u.createElement(f.T,{onConfirm:function(){T(),N()},isVisible:s,hide:N,titleText:"Email to subscribers",confirmText:"Send",buttonStyle:"STRONG",buttonSize:"LARGE",showCancelButton:!0,withCloseButton:!0,isDestructiveAction:!1},"A link to this story will be emailed to all your subscribers."))}function N(e){var t=e.post,n=e.onClick,i=e.menuStyle,r=e.paddingLeftRight,o=void 0===r?"20px":r;return u.createElement(l.c,null,(function(e){var r,a,l;return e&&e.id===(null==t||null===(r=t.creator)||void 0===r?void 0:r.id)&&(null==t||!t.isNewsletter)&&((null==t||null===(a=t.creator)||void 0===a||null===(l=a.newsletterV3)||void 0===l?void 0:l.subscribersCount)||0)>0?u.createElement(s.q3,{paddingTopBottom:"8px",paddingLeftRight:o},u.createElement(S,{post:t,onClick:n,menuStyle:i})):null}))}},64946:(e,t,n)=>{n.d(t,{m:()=>R});var i=n(80045),r=n(96540),o=n(27721),a=n(86329),u=n(14782),l=n(86527),s=n(89536),c=n(82284),d=n(64467),f=n(10467),m=n(5544),v=n(95420),p=n(67194),b=n(84182),y=n(1722),h=n(21335),E=n(34317),g=n(42976),k=n(91830),w={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"WithdrawSubmissionMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateSubmissionStatusInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateSubmissionStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"updatedAt"}}]}}]}}]};function S(){var e=_(),t=e.m(S),n=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function i(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===n||"GeneratorFunction"===(t.displayName||t.name))}var r={throw:1,return:2,break:3,continue:3};function o(e){var t,n;return function(i){t||(t={stop:function(){return n(i.a,2)},catch:function(){return i.v},abrupt:function(e,t){return n(i.a,r[e],t)},delegateYield:function(e,r,o){return t.resultName=r,n(i.d,N(e),o)},finish:function(e){return n(i.f,e)}},n=function(e,n,r){i.p=t.prev,i.n=t.next;try{return e(n,r)}finally{t.next=i.n}}),t.resultName&&(t[t.resultName]=i.v,t.resultName=void 0),t.sent=i.v,t.next=i.n;try{return e.call(this,t)}finally{i.p=t.prev,i.n=t.next}}}return(S=function(){return{wrap:function(t,n,i,r){return e.w(o(t),n,i,r&&r.reverse())},isGeneratorFunction:i,mark:e.m,awrap:function(e,t){return new D(e,t)},AsyncIterator:P,async:function(e,t,n,r,a){return(i(t)?A:T)(o(e),t,n,r,a)},keys:O,values:N}})()}function N(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError((0,c.A)(e)+" is not iterable")}function O(e){var t=Object(e),n=[];for(var i in t)n.unshift(i);return function e(){for(;n.length;)if((i=n.pop())in t)return e.value=i,e.done=!1,e;return e.done=!0,e}}function T(e,t,n,i,r){var o=A(e,t,n,i,r);return o.next().then((function(e){return e.done?e.value:o.next()}))}function A(e,t,n,i,r){return new P(_().w(e,t,n,i),r||Promise)}function P(e,t){function n(i,r,o,a){try{var u=e[i](r),l=u.value;return l instanceof D?t.resolve(l.v).then((function(e){n("next",e,o,a)}),(function(e){n("throw",e,o,a)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,a)}))}catch(e){a(e)}}var i;this.next||(C(P.prototype),C(P.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),C(this,"_invoke",(function(e,r,o){function a(){return new t((function(t,i){n(e,o,t,i)}))}return i=i?i.then(a,a):a()}),!0)}function _(){var e,t,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function o(n,i,r,o){var l=i&&i.prototype instanceof u?i:u,s=Object.create(l.prototype);return C(s,"_invoke",function(n,i,r){var o,u,l,s=0,c=r||[],d=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,u=0,l=e,f.n=n,a}};function m(n,i){for(u=n,l=i,t=0;!d&&s&&!r&&t<c.length;t++){var r,o=c[t],m=f.p,v=o[2];n>3?(r=v===i)&&(l=o[(u=o[4])?5:(u=3,3)],o[4]=o[5]=e):o[0]<=m&&((r=n<2&&m<o[1])?(u=0,f.v=i,f.n=o[1]):m<v&&(r=n<3||o[0]>i||i>v)&&(o[4]=n,o[5]=i,f.n=v,u=0))}if(r||n>1)return a;throw d=!0,i}return function(r,c,v){if(s>1)throw TypeError("Generator is already running");for(d&&1===c&&m(c,v),u=c,l=v;(t=u<2?e:l)||!d;){o||(u?u<3?(u>1&&(f.n=-1),m(u,l)):f.n=l:f.v=l);try{if(s=2,o){if(u||(r="next"),t=o[r]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,u<2&&(u=0)}else 1===u&&(t=o.return)&&t.call(o),u<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),u=1);o=e}else if((t=(d=f.n<0)?l:n.call(i,f))!==a)break}catch(t){o=e,u=1,l=t}finally{s=1}}return{value:t,done:d}}}(n,r,o),!0),s}var a={};function u(){}function l(){}function s(){}t=Object.getPrototypeOf;var c=[][i]?t(t([][i]())):(C(t={},i,(function(){return this})),t),d=s.prototype=u.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,C(e,r,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=s,C(d,"constructor",s),C(s,"constructor",l),l.displayName="GeneratorFunction",C(s,r,"GeneratorFunction"),C(d),C(d,r,"Generator"),C(d,i,(function(){return this})),C(d,"toString",(function(){return"[object Generator]"})),(_=function(){return{w:o,m:f}})()}function C(e,t,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}C=function(e,t,n,i){function o(t,n){C(e,t,(function(e){return this._invoke(t,n,e)}))}t?r?r(e,t,{value:n,enumerable:!i,configurable:!i,writable:!i}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},C(e,t,n,i)}function D(e,t){this.v=e,this.k=t}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,d.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=["postActionCallback"],R=function(e){var t=e.postActionCallback,n=(0,i.A)(e,I),c=(0,o.R)().value,d="submission"in n?n.submission:void 0,N="post"in n?n.post:void 0,O=(null==N?void 0:N.collection)||(null==N?void 0:N.pendingCollection)||(null==d?void 0:d.publication),T=(0,a.J)(null==O?void 0:O.id).viewerEdge,A=null!=N?N:null==d?void 0:d.post,P=A&&function(e,t){return t&&e.creator&&t.id===e.creator.id}(A,c),_=(null==T?void 0:T.isEditor)||(0,s.KT)(null==d?void 0:d.publication.viewerEdge),C=function(e){var t,n,i=e.post,r=e.submission,a=e.isEditor,u=(0,o.R)().value,l=(0,k.zF)(),s=(0,E.$L)(),c=(0,v.n)(w),d=(0,m.A)(c,2),N=d[0],O=d[1].loading,T=(null==r?void 0:r.post)||i,A=(null==T?void 0:T.id)||"",P=(null==i?void 0:i.collection)||(null==i?void 0:i.pendingCollection),_=(null==r?void 0:r.publication.id)||(null==P?void 0:P.id)||"",C=(null==r?void 0:r.publication.name)||(null==P?void 0:P.name)||"this publication",D=(null==T||null===(t=T.creator)||void 0===t?void 0:t.id)||"",j=!(null==T||null===(n=T.publishSchedule)||void 0===n||!n.publishAt),I={status:a?g.lT.REJECTED:g.lT.CANCELLED};r?I.submissionId=r.id:I.postPublicationTuple={postId:A,publicationId:_};var R="withdrawn",x="withdrawing";(r&&(0,b._v)(r.status)||i&&!i.pendingCollection)&&(R="removed",x="removing");var L=function(){l({message:"There was an error ".concat(x," the story").concat(i?" from ".concat(C):"",". Please try again later."),toastStyle:"ERROR"})},V=function(){var e=(0,f.A)(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,N({variables:{input:I},update:function(e,t){var n,i;if("PublicationSubmission"===(null===(n=t.data)||void 0===n||null===(i=n.updateSubmissionStatus)||void 0===i?void 0:i.__typename)){var r=t.data.updateSubmissionStatus;e.modify({id:e.identify({__typename:"PublicationSubmission",id:r.id}),fields:{status:function(){return r.status}}}),e.modify({id:e.identify({__typename:"Post",id:A}),fields:{publishSchedule:function(){return null},updatedAt:function(){return r.updatedAt},collection:function(){return null},pendingCollection:function(){return null},statusForCollection:function(){return null}}}),(null==u?void 0:u.id)===D&&(e.modify({id:(0,y.J)(e,{postId:A,viewerId:u.id}),fields:{activePublication:function(e,t){return t.DELETE}}}),j&&e.modify({id:(0,h.sf)(e,{userId:u.id,viewerId:u.id}),fields:{submissionsConnection:function(e,t){var n=t.readField;if(!e||(0,p.A_)(e))return e;var i=e.edges.filter((function(e){return n("id",null==e?void 0:e.node)!==r.id}));return F(F({},e),{},{edges:i})},scheduledPostsConnection:function(e,t){var n=t.readField;if(!e||(0,p.A_)(e))return e;var i=e.edges.filter((function(e){return n("id",null==e?void 0:e.node)!==A}));return F(F({},e),{},{edges:i})}}}))}},onCompleted:function(){l({message:"You have ".concat(R," your story from ").concat(C,".")})},onError:function(){L()}});case 5:s.event("submission.postWithdrawn",{postId:A,collectionId:_}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),L();case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}();return{collection:P,withdrawSubmission:V,loading:O}}({post:N,submission:d,isEditor:_}),D=C.withdrawSubmission,j=C.loading,R="Removing...",x="Remove from publication";P&&(R="Withdrawing...",x="Withdraw submission");var L=!c||!_&&!P||!O,V=!!(A&&"isNewsletter"in A&&A.isNewsletter);return L&&!d||V?null:r.createElement(u.q3,null,r.createElement(l.N,{onClick:function(){D(),null==t||t()}},j?R:x))}},55981:(e,t,n)=>{n.d(t,{n:()=>u});var i=n(96540),r=n(44402),o=n(1417),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"24px",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"24px";return function(n){return{width:e,height:t,"& path":{fill:n.colorTokens.foreground.error.primary.base}}}},u=function(e){var t=e.width,n=e.height,u=(0,r.l)();return i.createElement(o.A,{className:u(a(t,n))})}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/1085.2283e7ad.chunk.js.map